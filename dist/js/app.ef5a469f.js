(function(t){function e(e){for(var a,r,n=e[0],c=e[1],l=e[2],u=0,m=[];u<n.length;u++)r=n[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,n=1;n<s.length;n++){var c=s[n];0!==i[c]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},i={app:0},o=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=" /";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("85ec"),i=s.n(a);i.a},"05a4":function(t,e,s){"use strict";var a=s("54e0"),i=s.n(a);i.a},"07cf":function(t,e,s){"use strict";var a=s("3266"),i=s.n(a);i.a},"0dc4":function(t,e,s){"use strict";var a=s("d220"),i=s.n(a);i.a},1196:function(t,e,s){},"19d3":function(t,e,s){"use strict";var a=s("dc8b"),i=s.n(a);i.a},"1f41":function(t,e,s){},3266:function(t,e,s){},3808:function(t,e,s){"use strict";var a=s("dc5a"),i=s.n(a);i.a},"40d4":function(t,e,s){"use strict";var a=s("1f41"),i=s.n(a);i.a},"51ed":function(t,e,s){},"54e0":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Navbar",{key:t.$route.fullPath}),s("router-view")],1)},o=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-light"},[s("div",{staticClass:"container"},[s("a",{staticClass:"navbar-brand col-sm-3 col-md-2 mr-0 logo"},[t._v("Smart Grocery")]),s("h3",{staticClass:"logo"}),s("ul",{staticClass:"nav right"},[t.isLoggedIn?s("li",[s("router-link",{attrs:{to:"/"}},[t._v("Home")])],1):t._e(),t.isLoggedIn?s("li",[s("router-link",{attrs:{to:"/grocery-dashboard"}},[t._v("Dashboard")])],1):t._e(),t.isLoggedIn?s("li",[s("button",{staticClass:"btn btn-outline-primary",on:{click:t.logout}},[t._v("Log Out")])]):t._e()])])])},n=[],c=s("59ca"),l=(s("000b"),s("ea7b"),s("e71f"),{apiKey:Object({NODE_ENV:"production",VUE_APP_FB_PAGE_ACCESS_TOKEN:"EAAiUkvZCXcG4BAFhoeZCynyApZCeBtpd8YPJUVDgRG8ttHD0i1tk96yzICtoeqeyW9ofg2bryQtlIZCyDdmLY0BCZAaQePaAH6JjWEpGkLFBIeCPqaZCQkU4S765N0CZAJZCgL0EMbb7Flq61jGKAQX8IA1oAshOfZBggpAeY5wXArM3T4QuZCZAH6i",BASE_URL:" /"}).VUE_FIREBASE_APIKEY,authDomain:"smartgrocery-88590.firebaseapp.com",databaseURL:"https://smartgrocery-88590.firebaseio.com",projectId:"smartgrocery-88590",storageBucket:"smartgrocery-88590.appspot.com",messagingSenderId:"470019347392",appId:"1:470019347392:web:cbf759c897c4c3d099ae25",measurementId:"G-2QKWXGGSYZ"}),d=c["initializeApp"](l),u=d,m=s("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"homepage"}},[a("section",{staticClass:"features"},[a("div",{staticClass:"container"},[a("div",[a("h1",[t._v("Smart Grocery")]),t._m(0),a("div",{staticClass:"row"},[a("a",{staticClass:"btn-site-primary text-center mr-3",attrs:{href:"#features"}},[t._v("View All Features")]),t.isLoggedIn?t._e():a("SignIn")],1)]),a("img",{attrs:{src:s("8135"),alt:""}})])]),t._m(1),t._m(2)])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"list-group"},[s("li",{staticClass:"list-item"},[t._v("The Chatbot to save you time and make grocery shopping much easier.")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"text-overlay"},[s("div",{staticClass:"overlay"},[s("div",{staticClass:"text-overlay-inner"},[s("h3",[t._v("How It Works")]),s("div",{staticClass:"row pt-5 m-2"},[s("div",{staticClass:"col-lg-4 mb-5 mb-lg-0 card rounded-left bg-light pt-3 border-0",staticStyle:{"border-radius":"0","background-color":"#181d20c2!important"}},[s("i",{staticClass:"fas fa-clipboard-list fa-3x mb-3"}),s("h5",[t._v("Create A Grocery List")]),s("p",{staticClass:"px-lg-3 mb-0"},[t._v("Create as many shopping lists as needed. Use the inbuilt grocery search for convenience")])]),s("div",{staticClass:"col-lg-4 col-md-12 mb-5 mb-lg-0 card bg-light pt-3 border-0",staticStyle:{"border-radius":"0","background-color":"#181d20c2!important"}},[s("i",{staticClass:"fas fa-store-alt fa-3x mb-3"}),s("h5",[t._v("Link Your Local Supermarket Account")]),s("p",{staticClass:"px-lg-3 mb-0"},[t._v("Link your account with your local supermarket to enable delivery and collection services")])]),s("div",{staticClass:"col-lg-4 col-md-12 card rounded-right bg-light pt-3 border-0",staticStyle:{"border-radius":"0","background-color":"#181d20c2!important"}},[s("i",{staticClass:"fas fa-comments fa-3x mb-3"}),s("h5",[t._v("Message The Bot")]),s("p",{staticClass:"px-lg-3 mb-0"},[t._v("Interact with the bot through Facebook Messenger")]),s("a",{staticClass:"stretched-link",attrs:{href:"#features"}},[t._v("View features")])])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"feature-section",attrs:{id:"features"}},[s("h2",{staticClass:"font-weight-bold text-center my-5"},[t._v("ChatBot Features")]),s("p",{staticClass:"lead grey-text text-center w-responsive mx-auto mb-5"},[t._v(" The goal of the ChatBot is to help a user save time time when it comes to grocery shopping. "),s("br")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-5 text-center text-lg-left"},[s("img",{staticClass:"img-fluid",attrs:{src:"https://i.ya-webdesign.com/images/facebook-messenger-png-1.png"}})]),s("div",{staticClass:"col-lg-7"},[s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-1"},[s("i",{staticClass:"fas fa-share fa-lg"})]),s("div",{staticClass:"col-xl-10 col-md-11 col-10"},[s("h5",{staticClass:"font-weight-bold mb-3"},[t._v("Delivery")]),s("p",[t._v("Send a Message asking to schedule a grocery delivery with the name of the list you want, the time and date that suits you.")])])]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-1"},[s("i",{staticClass:"fas fa-share fa-lg"})]),s("div",{staticClass:"col-xl-10 col-md-11 col-10"},[s("h5",{staticClass:"font-weight-bold mb-3"},[t._v("Collection / PickUp")]),s("p",[t._v("Send a Message asking to schedule a grocery Pickup from your local store with the name of the list you want, the time and date that suits you.")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-1"},[s("i",{staticClass:"fas fa-share fa-lg"})]),s("div",{staticClass:"col-xl-10 col-md-11 col-10"},[s("h5",{staticClass:"font-weight-bold mb-3"},[t._v("Recipes")]),s("p",[t._v("Send a message asking for recipe suggestions with specified ingredients or ingredients in one of your shopping lists.")])])])])])])}],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"signUp"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-8 col-md-8 col-lg-8 mx-auto"},[s("div",{staticClass:"card card-signin my-5"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v("Time to make shopping a whole lot easier!")]),s("form",{staticClass:"form-signin"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 form-label-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"}],staticClass:"form-control",attrs:{type:"text",id:"firstname",placeholder:"First Name"},domProps:{value:t.firstname},on:{input:function(e){e.target.composing||(t.firstname=e.target.value)}}})]),s("br"),s("div",{staticClass:"col-md-6 form-label-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lastname,expression:"lastname"}],staticClass:"form-control",attrs:{type:"text",id:"lastname",placeholder:"Last Name"},domProps:{value:t.lastname},on:{input:function(e){e.target.composing||(t.lastname=e.target.value)}}})])]),s("br"),s("div",{staticClass:"form-label-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"Email address"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("br"),s("div",{staticClass:"form-label-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._m(0),s("button",{staticClass:"btn btn-lg btn-outline-primary",attrs:{type:"submit"},on:{click:t.signup}},[t._v("Sign Up")])])])])]),s("div",{staticClass:"col-sm-4 col-md-4 col-lg-4 mx-auto"},[s("div",{staticClass:"card card-signin my-5"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title text-center"},[t._v("Already Have an Account?")]),s("p",{staticClass:"text-center"},[t._v(" If you already has an account, go ahead and sign in. We've missed you! ")]),s("router-link",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{to:"/signin"}},[t._v("Sign In")])],1)])])])])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-label-group"},[s("input",{staticClass:"form-control",attrs:{type:"password",id:"password-confirm",placeholder:"Confirm Password"}})])}],v=u.firestore(),C={name:"signup",data:function(){return{email:"",password:"",firstname:"",lastname:""}},methods:{signup:function(t){var e=this;u.auth().createUserWithEmailAndPassword(this.email,this.password).then((function(){u.auth().currentUser.updateProfile({displayName:e.firstname}).then((function(){console.log(u.auth().currentUser),v.collection("users").doc(u.auth().currentUser.uid).set({firstname:e.firstname,lastname:e.lastname,username:e.firstname,email:e.email}).then((function(){Tt.go({name:"groceryDashboard"})})).catch((function(t){e.errorMessage=t.message}))})).catch((function(t){console.log(t),e.errorMessage=t.message}))})).catch((function(t){console.log(t),e.errorMessage=t.message})),t.preventDefault()}}},b=C,y=(s("0dc4"),s("2877")),_=Object(y["a"])(b,h,f,!1,null,"46fd8c79",null),I=_.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"signIn"}},[s("button",{staticClass:"btn",staticStyle:{"background-color":"#3b5998"},attrs:{type:"button"},on:{click:t.signin}},[s("i",{staticClass:"fab fa-facebook-f pr-1"}),t._v("Sign in with Facebook ")])])},k=[],x=(s("ac6a"),s("a481"),s("8aa5")),D=s.n(x),L=s("bc3a"),S=s.n(L),P=u.firestore(),U={name:"signin",data:function(){return{email:"",password:"",currentUser:u.auth().currentUser}},methods:{getUrlVars:function(){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,s,a){t[s]=a}));return t},getUrlParam:function(t,e){var s=e;return window.location.href.indexOf(t)>-1&&(s=this.getUrlVars()[t]),s},signin:function(t){var e=this,s=window.location.href,a=new URL(s),i=a.searchParams.get("account_linking_token"),o="EAAiUkvZCXcG4BAFhoeZCynyApZCeBtpd8YPJUVDgRG8ttHD0i1tk96yzICtoeqeyW9ofg2bryQtlIZCyDdmLY0BCZAaQePaAH6JjWEpGkLFBIeCPqaZCQkU4S765N0CZAJZCgL0EMbb7Flq61jGKAQX8IA1oAshOfZBggpAeY5wXArM3T4QuZCZAH6i",r=a.searchParams.get("redirect_uri");if(console.log(i),console.log(r),null!=i&&r){var n=new D.a.auth.FacebookAuthProvider;u.auth().signInWithPopup(n).then((function(t){t.credential.accessToken;var s=t.user;alert("Login successful for ".concat(s.providerData[0].displayName)),u.auth().currentUser.updateProfile({displayName:s.providerData[0].displayName}).then((function(){e.updateDoc(s,i,o,r)})).catch((function(t){console.log(t),e.errorMessage=t.message}))})).catch((function(t){console.log(t);t.code,t.message,t.email,t.credential}))}else{n=new D.a.auth.FacebookAuthProvider;u.auth().signInWithPopup(n).then((function(t){t.credential.accessToken;var s=t.user;alert("Login successful for ".concat(s.providerData[0].displayName)),u.auth().currentUser.updateProfile({displayName:s.providerData[0].displayName}).then((function(){e.currentUser=u.auth().currentUser,P.collection("users").doc(e.currentUser.uid).update({name:s.providerData[0].displayName,facebookID:s.providerData[0].uid}).then((function(){e.loadData(),Tt.go({name:"groceryDashboard"})})).catch((function(t){e.errorMessage=t.message}))})).catch((function(t){console.log(t),e.errorMessage=t.message}))})).catch((function(t){console.log(t);t.code,t.message,t.email,t.credential}))}},loadData:function(){console.log("Checking storage"+sessionStorage.getItem("storeId")),console.log("uid: "+this.currentUser.uid),P.collection("users").doc(this.currentUser.uid).get().then((function(t){t.exists&&t.get("storeId")&&(console.log(t.get("storeId")),sessionStorage.setItem("storeId",t.get("storeId")))})).catch((function(t){console.log("Error getting document:",t)}))},addToShoppingLists:function(t,e){var s=this;this.currentUser=u.auth().currentUser,console.log(this.currentUser.uid),console.log("addtoshopping lists");var a={messengerID:t.data.recipient};P.collection("shopping_lists").where("uid","==",this.currentUser.uid).get().then((function(t){var i=P.batch();t.docs.forEach((function(t){var e=D.a.firestore().collection("shopping_lists").doc(t.id);i.update(e,a)})),i.commit().then((function(){console.log("updated all documents inside"),window.location.href=e+"&authorization_code="+s.currentUser.uid}))})).catch((function(t){console.log(t.message),console.log("No Shopping lists yet"),window.location.href=e+"&authorization_code="+s.currentUser.uid}))},updateDoc:function(t,e,s,a){var i=this;this.currentUser=u.auth().currentUser,console.log("PAGE ACCESS TOKEN"+s),S.a.get("https://graph.facebook.com/v2.6/me?access_token="+s+"&fields=recipient&account_linking_token="+e).then((function(e){console.log(e.data.recipient),P.collection("users").doc(i.currentUser.uid).update({name:t.providerData[0].displayName,facebookID:t.providerData[0].uid,messengerID:e.data.recipient}).then((function(){console.log("then"),i.addToShoppingLists(e,a)})).catch((function(t){console.log(t.message),i.errorMessage=t.message}))}))}}},E=U,A=(s("93ef"),Object(y["a"])(E,w,k,!1,null,"2e8477d7",null)),N=A.exports,T={name:"homepage",components:{SignUp:I,SignIn:N},data:function(){return{isLoggedIn:!1,currentUser:!1}},created:function(){u.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=u.auth().currentUser.email)}},O=T,q=(s("40d4"),Object(y["a"])(O,p,g,!1,null,"1c6c51ad",null)),M=q.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid bg-light",attrs:{id:"verify-details"}},[s("div",{staticClass:"row"},[s("Sidebar"),s("div",{staticClass:"col-md-6 ml-sm-auto col-lg-9 pt-4 pl-4"},[s("div",{staticClass:"container"},[s("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-1 mb-3"}),s("div",{staticClass:"container"},[s("div",{staticClass:"card bg-info-card order-card"},[s("div",{staticClass:"card-block"},[t.verified?t._e():s("form",{attrs:{id:"signup-form"},on:{submit:function(e){return e.preventDefault(),t.processForm(e)}}},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control border-input",attrs:{type:"text",name:"email",placeholder:"JohnDowe@mail.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control border-input",attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Delivery Address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control border-input",attrs:{type:"text",name:"address",placeholder:"Home Address"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])])]),t._m(1)]),t.verified?s("div",{staticClass:"row"},[t._m(2),s("div",{staticClass:"col-md-7"},[s("h5",{staticClass:"m-b-20 text-center"},[t._v("Update Your Delivery Address")]),s("form",{attrs:{id:"address-form"},on:{submit:function(e){return e.preventDefault(),t.updateAddress(e)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control border-input",attrs:{type:"text",name:"address",placeholder:"No Address set"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])])]),t._m(3)])])]):t._e()])])])])])],1)])},F=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h5",{staticClass:"m-b-20 text-center"},[t._v(" Sign up to Your Local Supermarket "),s("br"),s("small",{staticClass:"text-center text-grey"},[t._v("(Needed for delivery and Collection Services)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-success btn-fill btn-wd p-2 m-2",attrs:{type:"submit"}},[t._v("Create a Link")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-5"},[s("h5",{staticClass:"m-b-20 text-center"},[t._v("Account Linked Successfully!")]),s("br"),s("div",{staticClass:"row justify-content-center"},[s("span",{staticClass:"mt-1"},[s("i",{staticClass:"far fa-check-circle text-success",staticStyle:{"font-size":"3.2rem"}})])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-success btn-fill btn-wd p-2 m-2",attrs:{type:"submit"}},[t._v("Update Address")])])}],j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"sidebar sidebar-default sidebar-separate sidebar-fixed pt-4"},[s("div",{staticClass:"sidebar-content"},[s("div",{staticClass:"sidebar-category sidebar-default"},[s("div",{staticClass:"sidebar-user rounded"},[s("div",{staticClass:"category-content"},[s("h6",[t._v("Good to see You!")]),s("small",[t._v(t._s(t.currentUser.displayName))])])])]),s("div",{staticClass:"sidebar-category sidebar-default"},[t._m(0),s("div",{staticClass:"category-content"},[s("ul",{staticClass:"nav flex-column"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/GroceryLists/"}},[s("i",{staticClass:"fas fa-shopping-cart"}),t._v(" Grocery Lists ")])],1),s("li",{staticClass:"nav-item"},[t.verified?t._e():s("router-link",{staticClass:"nav-link",attrs:{to:"/verify-details"}},[s("i",{staticClass:"fas fa-store"}),t._v("Verify Store Login ")]),t.verified?s("router-link",{staticClass:"nav-link",attrs:{to:"/verify-details"}},[s("i",{staticClass:"fas fa-home"}),t._v("Change Delivery Address ")]):t._e()],1),t._m(1)])])])])])},G=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"category-title"},[s("span",[t._v("Options")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:"https://www.facebook.com/SmartGrocery-103970551177074"}},[s("i",{staticClass:"fab fa-facebook-messenger text-primary"}),t._v(" Visit Facebook Page ")])])}],Z={name:"sidebar",data:function(){return{currentUser:u.auth().currentUser,verified:null}},created:function(){u.auth().currentUser&&(this.currentUser=u.auth().currentUser),null!=sessionStorage.getItem("storeId")&&(console.log(sessionStorage.getItem("storeId")),this.verified=!0)}},R=Z,B=(s("19d3"),Object(y["a"])(R,j,G,!1,null,"33928a75",null)),H=B.exports,z=u.firestore(),Q={name:"verifyDetails",components:{Sidebar:H},data:function(){return{currentUser:u.auth().currentUser,verified:null,storeId:sessionStorage.getItem("storeId"),errors:[],email:null,password:null,address:null}},created:function(){this.loadData()},methods:{processForm:function(){var t=this;S.a.post("https://supermarketmock-api.herokuapp.com/api/register",{email:this.email,password:this.password,address:this.address}).then((function(e){console.log(e),console.log(e.data._id),console.log("trying to update store id in firebase"),200==e.status&&z.collection("users").doc(t.currentUser.uid).set({storeId:e.data._id},{merge:!0})}),(function(t){console.log(t)}))},updateAddress:function(){S.a.put("https://supermarketmock-api.herokuapp.com/api/customer/"+this.storeId,{address:this.address}).then((function(t){}),(function(t){console.log(t)}))},loadData:function(){var t=this;console.log("Checking storage"+sessionStorage.getItem("storeId")),console.log("uid: "+this.currentUser.uid),z.collection("users").doc(this.currentUser.uid).get().then((function(t){t.exists&&t.get("storeId")&&(console.log(t.get("storeId")),sessionStorage.setItem("storeId",t.get("storeId")))})).catch((function(t){console.log("Error getting document:",t)})),null!=sessionStorage.getItem("storeId")?(this.verified=!0,S.a.get("https://supermarketmock-api.herokuapp.com/api/customer/"+sessionStorage.getItem("storeId")).then((function(e){console.log(e),console.log(e.data.address),200==e.status&&(t.address=e.data.address)}),(function(t){console.log(t)}))):this.verified=!1}}},K=Q,V=(s("71a6"),Object(y["a"])(K,$,F,!1,null,"76f6ccf0",null)),Y=V.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid bg-light",attrs:{id:"grocery-dashboard"}},[s("div",{staticClass:"row"},[s("Sidebar"),s("div",{staticClass:"col-md-6 ml-sm-auto col-lg-9 pt-4 pl-4"},[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 col-xl-6 pt-4"},[s("div",{staticClass:"card bg-info-card order-card"},[s("div",{staticClass:"card-block"},[t._m(1),s("br"),s("div",{staticClass:"row"},[s("h5",{staticClass:"col-6 mt-2"},[s("i",{staticClass:"fas fa-clipboard-list",staticStyle:{"font-size":"20px"}}),t._v(" "+t._s(t.deliveryList)+" ")]),s("h5",{staticClass:"col-6 mt-2"},[s("i",{staticClass:"fas fa-calendar-day",staticStyle:{"font-size":"20px"}}),t._v(" Date "+t._s(t.deliveryDate)+" ")]),s("h5",{staticClass:"col-6 mt-2"},[s("i",{staticClass:"far fa-clock",staticStyle:{"font-size":"20px"}}),t._v(" Expect at "+t._s(t.deliveryTime.slice(0,-3))+" ")]),s("h5",{staticClass:"col-6 mt-2"},[s("i",{staticClass:"fas fa-euro-sign mt-1",staticStyle:{"font-size":"20px"}}),t._v(" Cost "+t._s(t.deliveryCost)+" ")])])])])]),s("div",{staticClass:"col-md-6 col-xl-6 pt-4"},[s("div",{staticClass:"card bg-info-card order-card"},[s("div",{staticClass:"card-block"},[t._m(2),s("br"),s("div",{staticClass:"row"},[s("h5",{staticClass:"col-6 mt-2"},[s("i",{staticClass:"fas fa-clipboard-list",staticStyle:{"font-size":"20px"}}),t._v(" "+t._s(t.pickupList)+" ")]),s("h5",{staticClass:"col-6 mt-2"},[s("i",{staticClass:"fas fa-calendar-day",staticStyle:{"font-size":"20px"}}),t._v(" Date "+t._s(t.pickupDate)+" ")]),s("h5",{staticClass:"col-6 mt-2"},[s("i",{staticClass:"far fa-clock",staticStyle:{"font-size":"20px"}}),t._v(" Expect at "+t._s(t.pickupTime.slice(0,-3))+" ")]),s("h5",{staticClass:"col-6 mt-2"},[s("i",{staticClass:"fas fa-euro-sign mt-1",staticStyle:{"font-size":"20px"}}),t._v(" Cost "+t._s(t.pickupCost)+" ")])])])])])])])])],1)])},J=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-1 mb-3 border-bottom"},[s("h1",{staticClass:"h2"},[t._v("Dashboard")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",{staticClass:"m-b-20 text-center"},[s("i",{staticClass:"fas fa-truck",staticStyle:{"font-size":"22px"}}),t._v(" Latest Delivery Details "),s("br")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",{staticClass:"m-b-20 text-center"},[s("i",{staticClass:"fas fa-shopping-basket",staticStyle:{"font-size":"22px"}}),t._v(" Latest Pickup Details "),s("br")])}],X=u.firestore(),tt={name:"grocery-dashboard",components:{Sidebar:H},data:function(){return{currentUser:u.auth().currentUser,deliveryDate:"No Deliveries scheduled yet",deliveryList:null,deliveryTime:null,deliveryCost:null,pickupDate:"No Pickups scheduled yet",pickupList:null,pickupTime:null,pickupCost:null,verified:null,storeId:sessionStorage.getItem("storeId")}},created:function(){this.fetchInfo(),this.loadData()},methods:{fetchInfo:function(){this.deliveryInfo(),this.pickupInfo()},deliveryInfo:function(){var t=this;S.a.get("https://supermarketmock-api.herokuapp.com/api/delivery/customer/"+sessionStorage.getItem("storeId")).then((function(e){console.log(e),console.log(e.data[0]),200==e.status&&void 0==e.data?t.deliveryDate="No Deliveries yet":(t.deliveryList=e.data[0].list_name,t.deliveryDate=e.data[0].delivery_date,t.deliveryDate=e.data[0].delivery_date,t.deliveryTime=e.data[0].delivery_time,t.deliveryCost=e.data[0].order_price)}),(function(t){console.log(t)}))},pickupInfo:function(){var t=this;S.a.get("https://supermarketmock-api.herokuapp.com/api/pickup/customer/"+sessionStorage.getItem("storeId")).then((function(e){console.log(e),console.log(e.data[0]),200==e.status&&void 0==e.data?t.pickupDate="No Pickups yet":(t.pickupList=e.data[0].list_name,t.pickupDate=e.data[0].pickup_date,t.pickupTime=e.data[0].pickup_time,t.pickupCost=e.data[0].order_price)}),(function(t){console.log(t)}))},loadData:function(){var t=this;console.log("Checking storage"+sessionStorage.getItem("storeId")),console.log("uid: "+this.currentUser.uid),X.collection("users").doc(this.currentUser.uid).get().then((function(t){t.exists&&t.get("storeId")&&(console.log(t.get("storeId")),sessionStorage.setItem("storeId",t.get("storeId")))})).catch((function(t){console.log("Error getting document:",t)})),null!=sessionStorage.getItem("storeId")?(this.verified=!0,S.a.get("https://supermarketmock-api.herokuapp.com/api/customer/"+sessionStorage.getItem("storeId")).then((function(e){console.log(e),console.log(e.data.address),200==e.status&&(t.address=e.data.address)}),(function(t){console.log(t)}))):this.verified=!1}}},et=tt,st=(s("83ea"),Object(y["a"])(et,W,J,!1,null,"387a5a72",null)),at=st.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid bg-light",attrs:{id:"add-grocery"}},[s("div",{staticClass:"row"},[s("Sidebar"),s("div",{staticClass:"col-md-6 ml-sm-auto col-lg-9 pt-4 pl-4"},[s("div",{staticClass:"container"},[s("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-1 mb-3 border-bottom"},[s("h1",{staticClass:"h2"},[t._v("Your Grocery Lists")]),s("button",{staticClass:"btn btn-outline-dark btn-circle btn-sm",attrs:{type:"button",to:"/addItem"}},[s("i",{staticClass:"fa fa-plus"}),s("router-link",{attrs:{to:"/addItem"}},[t._v("Create New List")])],1)]),s("div",{staticClass:"container"},t._l(t.shoppingLists,(function(e){return s("div",{key:e.docuID,attrs:{id:"accordian"+e.docuID}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h5",{staticClass:"mb-0"},[s("button",{staticClass:"btn btn-link list-title",attrs:{"data-toggle":"collapse","data-target":"#"+e.docuID,"aria-expanded":"true","aria-controls":e.docuID}},[s("h5",{staticClass:"listName"},[t._v(" "+t._s(e.listName)+" "),s("span",{staticClass:"badge badge-secondary itemsCount"},[t._v(t._s(e.amnt)+" Items")])])])])]),s("div",{staticClass:"collapse show",attrs:{id:e.docuID,"aria-labelledby":e.docuID,"data-parent":"#accordian"+e.docuID}},[s("div",{staticClass:"card-body"},[s("div",{attrs:{id:"editBtn"}},[s("router-link",{staticClass:"btn btn-outline-success btn-circle btn-sm",attrs:{tag:"span",to:{name:"modify-list",params:{id:e["docuID"]}}}},[s("i",{staticClass:"fa fa-edit"}),t._v(" Edit List ")])],1),s("div",{staticClass:"row"},[s("div",{staticClass:"list-group col-lg-12"},[s("div",{staticClass:"row"},t._l(e.items,(function(e,a){return s("div",{key:a,staticClass:"col-xs-12 col-sm-6 col-md-4 col-lg-4 p-3"},[s("div",{staticClass:"list-group-item",attrs:{href:""}},[s("div",{staticClass:"flex-column"},[t._v(" "+t._s(e.name)+" "),s("div",{},[s("p",{staticClass:"d-inline badge"},[t._v("Price: €"+t._s(e.price))]),s("span",{staticClass:"d-inline badge badge-light badge-pill"},[t._v("Amount Needed: "+t._s(e.quantity))])])]),s("div",{staticClass:"image-parent"},[s("img",{staticClass:"img-fluid",attrs:{src:e.img,alt:"quixote"}})])])])})),0)])])])])])])})),0)])])],1)])},ot=[],rt=(s("6b54"),u.firestore()),nt={name:"groceryLists",components:{Sidebar:H},data:function(){return{currentUser:!1,shoppingLists:[]}},created:function(){u.auth().currentUser&&(this.currentUser=u.auth().currentUser),this.getShoppingingLists(),console.log(this.shoppingLists)},methods:{getShoppingingLists:function(){var t=[],e=rt.collection("shopping_lists");e.where("uid","==",this.currentUser.uid).get().then((function(e){if(e.empty)return t=null,void console.log("No matching documents.");e.forEach((function(e){e.id.toString;var s=e.data();s.docuID=e.id,s.amnt=s.items.length,t.push(s)}))})).catch((function(t){console.log("Error getting documents",t)}));this.shoppingLists=t}}},ct=nt,lt=(s("05a4"),Object(y["a"])(ct,it,ot,!1,null,"650abfa3",null)),dt=lt.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid bg-light main-panel",attrs:{id:"add-Item"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-4 col-md-5"},[s("div",{staticClass:"card card-user"},[s("div",{staticClass:"content"},[s("div",{staticClass:"author"},[""!=t.listName?s("h4",{staticClass:"title"},[t._v(" "+t._s(t.listName)+" "),s("br")]):t._e(),""==t.listName?s("h4",{staticClass:"title"},[t._v(" List Name "),s("br")]):t._e()]),s("div",{staticClass:"container"})])])]),s("div",{staticClass:"col-lg-8 col-md-7"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"content"},[s("form",{attrs:{id:"createListForm"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("List Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.listName,expression:"listName"}],staticClass:"form-control border-input",attrs:{type:"text",placeholder:"Name Of List",required:""},domProps:{value:t.listName},on:{keyup:t.validateListName,input:function(e){e.target.composing||(t.listName=e.target.value)}}}),t.errorMessage?s("p",{staticClass:"text-danger"},[t._v(t._s(t.errorMessageValue))]):t._e()])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("label",[t._v("Product")]),s("AutoCompleteSearch",{attrs:{"place-holder-text":t.placeHolderInputText,"result-items":t.autoCompleteResult,"on-key-up":t.onKeyUpAutoCompleteEvent,"on-selected":t.onSelectedAutoCompleteEvent,"auto-complete-progress":t.autoCompleteProgress,"item-text":t.autoCompleteText,"item-id":t.autoCompleteFieldId,"item-image":t.autoCompleteImage}})],1),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Quantity")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control border-input",attrs:{type:"number",required:"",min:"1"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})])])]),t._m(1),s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-secondary btn-fill btn-wd",attrs:{type:"submit",id:"btnCreateList"},on:{click:t.createList}},[t._v("Add Product & Create List")])]),s("div",{staticClass:"clearfix"})])])])])])])])])},mt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("h4",{staticClass:"title"},[t._v("Create List")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v(" Expiry Date "),s("small",[t._v("(Optional)")])]),s("input",{staticClass:"form-control border-input",attrs:{type:"text",value:"01/01/20"}})])])])}],pt=(s("6762"),s("2fdb"),s("7f7f"),[{id:1,name:"Milk"},{id:2,name:"Bread"},{id:3,name:"Cheese"},{id:4,name:"Mice Meat"},{id:5,name:"Butter"},{id:6,name:"Peppers"}]),gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"autocomplete form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keywordSearch,expression:"keywordSearch"}],staticClass:"form-control border-input",class:{"loading-circle":t.keywordSearch.length>1,"hide-loading-circle":t.resultItems.length>0||0==t.resultItems.length&&!t.autoCompleteProgress},attrs:{type:"text",id:"autoCompleteSearch",placeholder:t.placeHolderText},domProps:{value:t.keywordSearch},on:{keyup:function(e){!t.autoCompleteProgress&&t.onKeyUp(t.keywordSearch)},input:function(e){e.target.composing||(t.keywordSearch=e.target.value)}}}),t.resultItems.length>0?s("ul",{staticClass:"list-group autocomplete-results"},t._l(t.resultItems,(function(e,a){return s("li",{key:a,staticClass:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",on:{click:function(s){t.keywordSearch="",t.onSelected(e[t.itemId],e[t.itemText],e[t.itemImage])}}},[s("div",{staticClass:"media align-items-lg-center flex-column flex-lg-row"},[s("div",{staticClass:"media-body order-2 order-lg-1"},[s("h5",{staticClass:" font-weight-bold"},[t._v(" "+t._s(e[t.itemText])+" "),s("p",{staticClass:"font-weight-bold text-success my-2"},[t._v(" €"+t._s(e[t.itemId])+" ")])])])])])})),0):t._e()])},ht=[],ft={name:"autoCompleteSearch",props:{placeHolderText:String,onKeyUp:Function,onSelected:Function,resultItems:Array,autoCompleteProgress:Boolean,itemText:String,itemId:String,itemImage:String},data:function(){return{keywordSearch:""}}},vt=ft,Ct=(s("3808"),Object(y["a"])(vt,gt,ht,!1,null,"453065dd",null)),bt=Ct.exports,yt=u.firestore(),_t={name:"add-item",mounted:function(){this.products=pt},components:{Sidebar:H,AutoCompleteSearch:bt},data:function(){return{currentUser:u.auth().currentUser,placeHolderInputText:"Search for a Product",autoCompleteResult:[],autoCompleteProgress:!1,autoCompleteText:"name",autoCompleteFieldId:"price",autoCompleteImage:"image",productList:{},listName:"",quantity:null,listNames:[],errorMessageValue:null,errorMessage:!1,messengerID:null}},created:function(){this.getListNames()},methods:{onSelectedAutoCompleteEvent:function(t,e,s){console.log(t,e,s),this.autoCompleteProgress=!1,this.autoCompleteResult=[];var a={name:e,price:t,img:s};this.placeHolderInputText=e,this.productList=a},onKeyUpAutoCompleteEvent:function(t){var e=this;this.autoCompleteResult=[],this.autoCompleteProgress=!1,t.length>1?(this.autoCompleteProgress=!0,S()({method:"get",url:"https://dev.tescolabs.com/grocery/products/?query="+t+"&offset=0&limit=10",headers:{"Ocp-Apim-Subscription-Key":"30661c41f57f4b1e8351e4834c462e40"}}).then((function(s){var a=[];s.data.uk.ghs.products.results.forEach((function(e,s){console.log(e),e.name.toLowerCase().indexOf(t.toLowerCase())>=0&&a.push(e)})),e.autoCompleteResult=a,e.autoCompleteProgress=!1})).catch((function(t){e.autoCompleteProgress=!1,e.autoCompleteResult=[]}))):(this.autoCompleteProgress=!1,this.autoCompleteResult=[])},createList:function(){var t=this;if(!1===this.errorMessage&&""!=this.listName){this.productList.quantity=this.quantity;var e=this.productList;yt.collection("shopping_lists").add({uid:this.currentUser.uid,listName:this.listName,items:[e]}).then((function(e){var s=e.id;console.log(s),t.$router.push({name:"modify-list",params:{id:s}})})).catch((function(e){t.$router.push({name:"groceryLists",params:{id:id}}),t.errorMessage=e.message}))}},getListNames:function(){var t=this,e=[],s=yt.collection("shopping_lists");s.where("uid","==",this.currentUser.uid).get().then((function(s){var a;s.empty?console.log("No matching documents."):(s.forEach((function(t){console.log(t.id,"=>",t.data().listName),e.push(t.data().listName.toLowerCase()),a=t.data().messengerID?t.data().messengerID:null})),t.messengerID=a,t.listNames=e)})).catch((function(t){console.log("Error getting documents",t)})).then((function(){t.checkForMessengerID()}))},checkForMessengerID:function(){var t,e=this;(console.log("check for messengerID"+this.messengerID),null==this.messengerID)&&yt.collection("users").doc(this.currentUser.uid).get().then((function(e){e.exists&&(console.log("checkformessenger"+e.data().messengerID),t=e.data().messengerID)})).catch((function(t){console.log("Error getting document:",t)})).then((function(){e.messengerID=t,null!=e.messengerID?e.addMessengerIDToLists():console.log("Messenger ID is still not set! "+e.messengerID)}))},addMessengerIDToLists:function(){console.log("addMessengerIDToLists"+this.messengerID);var t={messengerID:this.messengerID};yt.collection("shopping_lists").where("uid","==",this.currentUser.uid).get().then((function(e){var s=yt.batch();e.docs.forEach((function(e){var a=yt.collection("shopping_lists").doc(e.id);s.update(a,t)})),s.commit().then((function(){console.log("updated all documents inside")}))}))},validateListName:function(){var t=this.listName.toLowerCase();this.listNames.includes(t)?(this.errorMessage=!0,this.errorMessageValue="A list with this name exists already."):""==this.listName?(this.errorMessage=!0,this.errorMessageValue="The List Name can't be empty!"):this.errorMessage=!1}}},It=_t,wt=(s("649f"),Object(y["a"])(It,ut,mt,!1,null,"60439a43",null)),kt=wt.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid bg-light main-panel",attrs:{id:"add-Item"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-4 col-md-5"},[s("div",{staticClass:"accordion",attrs:{id:"myAccordion"}},[s("div",{staticClass:"card card-user"},[s("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[s("h2",{staticClass:"mb-0"},[s("button",{staticClass:"btn btn-link author",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne"}},[s("div",{staticClass:"author"},[""!=t.listName?s("h4",{staticClass:"title"},[t._v(" "+t._s(t.listName)+" "),s("br"),s("small",{staticClass:"text-grey"},[t._v("(Click to expand)")])]):t._e(),""==t.listName?s("h4",{staticClass:"title"},[t._v(" List Name "),s("br")]):t._e()])])])]),s("hr"),s("div",{staticClass:"text-center"},[t.changes?t._e():s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"},[s("h5",[t._v(" "+t._s(t.amountOfItems)+" "),s("br"),s("small",[t._v("Items")])])]),s("div",{staticClass:"col-md-4"},[s("h5",[t._v(" €"+t._s(t.totalPrice)+" "),s("br"),s("small",[t._v("Total Cost")])])]),s("div",{staticClass:"col-md-4 mt-2"},[s("small",{staticClass:"mt-3 mr-1"},[s("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:t.deleteList}},[t._v("Delete List")])])])]),t.changes?s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"},[s("h5",[t._v(" "+t._s(t.amountOfItems)+" "),s("br"),s("small",[t._v("Items")])])]),s("div",{staticClass:"col-md-4"},[s("h5",[t._v(" €"+t._s(t.totalPrice)+" "),s("br"),s("small",[t._v("Total Cost")])])]),s("div",{staticClass:"col-md-4 mt-2"},[s("small",{staticClass:"mt-3 mr-1"},[s("button",{staticClass:"btn btn-sm btn-outline-success",on:{click:t.updateList}},[t._v("Save Changes")])])])]):t._e()]),s("div",{staticClass:"collapse",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#myAccordion"}},[s("div",{},[s("div",{staticClass:"content container"},[s("div",{},[s("ul",{staticClass:"list-group-flush mb-3 item"},t._l(t.shoppingLists[0],(function(e,a){return s("li",{key:a,staticClass:"list-group-item d-flex justify-content-between lh-condensed item"},[s("div",[s("h6",{staticClass:"my-0"},[s("a",{staticClass:"text-danger",on:{click:function(e){return t.deleteItemFromLocalList(a)}}},[t._v("X Remove")]),s("br"),t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"quantity"},[s("small",{staticClass:"text-success mr-3"},[t._v("Price: €"+t._s(e.price))]),s("div",{staticClass:"input-group"},[t._m(0,!0),s("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],staticClass:"form-control form-control",attrs:{type:"number",name:"quantity",min:"1"},domProps:{value:e.quantity},on:{change:function(e){return t.changeLocalQuantity(a,e)},input:function(s){s.target.composing||t.$set(e,"quantity",s.target.value)}}})])])])])})),0)])])])])])])]),s("div",{staticClass:"col-lg-8 col-md-7"},[s("div",{staticClass:"card"},[t._m(1),s("div",{staticClass:"content"},[s("form",{attrs:{id:"createListForm"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("label",[t._v("Product")]),s("AutoCompleteSearch",{attrs:{"place-holder-text":t.placeHolderInputText,"result-items":t.autoCompleteResult,"on-key-up":t.onKeyUpAutoCompleteEvent,"on-selected":t.onSelectedAutoCompleteEvent,"auto-complete-progress":t.autoCompleteProgress,"item-text":t.autoCompleteText,"item-id":t.autoCompleteFieldId,"item-image":t.autoCompleteImage}})],1),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Quantity")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control border-input",attrs:{type:"number",required:""},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})])])]),t._m(2),s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-secondary btn-fill btn-wd",attrs:{type:"submit",id:"btnCreateList"},on:{click:t.addToList}},[t._v("Add Product")])]),s("div",{staticClass:"clearfix"})])])])])])])])])},Dt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("small",{staticClass:"input-group-text"},[t._v("Quantity")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("h4",{staticClass:"title"},[t._v("Add Products")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v(" Expiry Date "),s("small",[t._v("(Optional)")])]),s("input",{staticClass:"form-control border-input",attrs:{type:"text",placeholder:"Date"}})])])])}],Lt=u.firestore(),St={name:"modify-list",components:{Sidebar:H,AutoCompleteSearch:bt},data:function(){return{currentUser:!1,placeHolderInputText:"Search for a Product",autoCompleteResult:[],autoCompleteProgress:!1,autoCompleteText:"name",autoCompleteFieldId:"price",autoCompleteImage:"image",listName:"",amountOfItems:0,totalPrice:null,quantity:null,listId:null,shoppingLists:[],changes:!1,messengerID:null}},created:function(){u.auth().currentUser&&(this.currentUser=u.auth().currentUser),this.listId=this.$route.params.id,this.fetchListItems(this.listId)},methods:{onSelectedAutoCompleteEvent:function(t,e,s){console.log(t,e,s),this.autoCompleteProgress=!1,this.autoCompleteResult=[];var a={name:e,price:t,img:s};this.placeHolderInputText=e,this.productList=a},onKeyUpAutoCompleteEvent:function(t){var e=this;this.autoCompleteResult=[],this.autoCompleteProgress=!1,t.length>1?(this.autoCompleteProgress=!0,S()({method:"get",url:"https://dev.tescolabs.com/grocery/products/?query="+t+"&offset=0&limit=10",headers:{"Ocp-Apim-Subscription-Key":"30661c41f57f4b1e8351e4834c462e40"}}).then((function(s){var a=[];s.data.uk.ghs.products.results.forEach((function(e,s){console.log(e),e.name.toLowerCase().indexOf(t.toLowerCase())>=0&&a.push(e)})),e.autoCompleteResult=a,e.autoCompleteProgress=!1})).catch((function(t){e.autoCompleteProgress=!1,e.autoCompleteResult=[]}))):(this.autoCompleteProgress=!1,this.autoCompleteResult=[])},addToList:function(){var t=this;if(null!=this.productList){this.productList.quantity=this.quantity;var e=Lt.collection("shopping_lists").doc(this.listId);this.productList,Lt.runTransaction((function(s){return s.get(e).then((function(a){console.log(a.data().items);var i=a.data().items.concat(t.productList);console.log(i),s.update(e,{list_price:t.totalPrice,list_quantity:t.quantity,items:i})}))})).then((function(e){console.log("Transaction success!"),t.$router.go()})).catch((function(t){console.log("Transaction failure:",t)}))}else console.log("problem")},deleteItemFromLocalList:function(t){this.changes=!0;var e=this.shoppingLists[0];e.splice(t,1);var s=0;e.forEach((function(t){s+=t.quantity*t.price})),this.totalPrice=s.toFixed(2),this.amountOfItems=e.length,console.log(s),console.log(e.length)},changeLocalQuantity:function(t){this.changes=!0;var e=this.shoppingLists[0];this.shoppingLists[0][t]=e[t];var s=0;e.forEach((function(t){s+=t.quantity*t.price})),this.totalPrice=s.toFixed(2),this.amountOfItems=e.length},updateList:function(){var t=this;if(1==this.changes){var e=this.shoppingLists[0],s=Lt.collection("shopping_lists").doc(this.listId);Lt.runTransaction((function(a){return a.get(s).then((function(i){console.log(i.data().items);var o=e;console.log(o),a.update(s,{list_price:t.totalPrice,list_quantity:t.amountOfItems,items:o})}))})).then((function(e){console.log("Transaction success!"),t.$router.go()})).catch((function(t){console.log("Transaction failure:",t)}))}else console.log("problem")},deleteList:function(){var t=this;Lt.collection("shopping_lists").doc(this.listId).delete().then((function(){t.$router.push({name:"groceryLists"})}))},fetchListItems:function(t){var e=this,s=0,a=[],i=Lt.collection("shopping_lists");i.doc(t).get().then((function(o){var r;if(o.empty)return a=[],void console.log("No matching documents.");o.data().messengerID?(r=o.data().messengerID,console.log("messengerID in fetchList"+r)):r=null;o.id.toString;var n=o.data();n.docuID=o.id,n.amnt=n.items.length,e.listName=n.listName,e.messengerID=r,e.amountOfItems=n.amnt,n.items.forEach((function(t){s+=t.quantity*t.price})),e.totalPrice=s.toFixed(2),i.doc(t).set({list_price:e.totalPrice,list_quantity:e.amountOfItems},{merge:!0}),a.push(n.items),e.shoppingLists=a})).catch((function(t){console.log("Error getting documents",t)})).then((function(){e.checkForMessengerID()}))},checkForMessengerID:function(){var t,e=this;(console.log("check for messengerID"+this.messengerID),null==this.messengerID)&&Lt.collection("users").doc(this.currentUser.uid).get().then((function(e){e.exists&&(console.log("checkformessenger"+e.data().messengerID),t=e.data().messengerID)})).catch((function(t){console.log("Error getting document:",t)})).then((function(){e.messengerID=t,null!=e.messengerID?e.addMessengerIDToLists():console.log("Messenger ID is still not set! "+e.messengerID)}))},addMessengerIDToLists:function(){console.log("addMessengerIDToLists"+this.messengerID);var t={messengerID:this.messengerID};Lt.collection("shopping_lists").where("uid","==",this.currentUser.uid).get().then((function(e){var s=Lt.batch();e.docs.forEach((function(e){var a=Lt.collection("shopping_lists").doc(e.id);s.update(a,t)})),s.commit().then((function(){console.log("updated all documents inside")}))}))}}},Pt=St,Ut=(s("866c"),Object(y["a"])(Pt,xt,Dt,!1,null,"28574a18",null)),Et=Ut.exports;a["a"].use(m["a"]);var At=new m["a"]({routes:[{path:"/",name:"homepage",component:M},{path:"/verify-details/",name:"verifyDetails",component:Y,meta:{requiresAuth:!0}},{path:"/grocery-dashboard/",name:"groceryDashboard",component:at,meta:{requiresAuth:!0}},{path:"/grocerylists/",name:"groceryLists",component:dt,meta:{requiresAuth:!0}},{path:"/addItem/",name:"add-item",component:kt,meta:{requiresAuth:!0}},{path:"/modifyList/:id",name:"modify-list",props:!0,component:Et,meta:{requiresAuth:!0}},{path:"/signin",name:"signin",component:N,meta:{requiresGuest:!0}},{path:"/signup",name:"signup",component:I,meta:{requiresGuest:!0}},{path:"*",name:"catchAll",component:M}]});At.beforeEach((function(t,e,s){t.matched.some((function(t){return t.meta.requiresAuth}))?u.auth().currentUser?s():s({path:"/",query:{redirect:t.fullPath}}):t.matched.some((function(t){return t.meta.requiresGuest}))&&u.auth().currentUser?s({path:"/",query:{redirect:t.fullPath}}):s()}));var Nt,Tt=At,Ot={name:"navbar",data:function(){return{isLoggedIn:!1,currentUser:!1}},created:function(){u.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=u.auth().currentUser.email)},methods:{logout:function(){sessionStorage.clear(),u.auth().signOut().then((function(){Tt.go({name:"homepage"})}))}}},qt=Ot,Mt=(s("07cf"),Object(y["a"])(qt,r,n,!1,null,"226d14e8",null)),$t=Mt.exports,Ft={name:"app",components:{Navbar:$t}},jt=Ft,Gt=(s("034f"),Object(y["a"])(jt,i,o,!1,null,null,null)),Zt=Gt.exports;a["a"].config.productionTip=!1,u.auth().onAuthStateChanged((function(t){Nt||(Nt=new a["a"]({router:Tt,render:function(t){return t(Zt)}}).$mount("#app"))}))},"649f":function(t,e,s){"use strict";var a=s("ae52"),i=s.n(a);i.a},"71a6":function(t,e,s){"use strict";var a=s("c08f"),i=s.n(a);i.a},8135:function(t,e,s){t.exports=s.p+"img/onePlusPhone.9aaec5de.png"},"83ea":function(t,e,s){"use strict";var a=s("1196"),i=s.n(a);i.a},"85ec":function(t,e,s){},"866c":function(t,e,s){"use strict";var a=s("c7f2"),i=s.n(a);i.a},"93ef":function(t,e,s){"use strict";var a=s("51ed"),i=s.n(a);i.a},ae52:function(t,e,s){},c08f:function(t,e,s){},c7f2:function(t,e,s){},d220:function(t,e,s){},dc5a:function(t,e,s){},dc8b:function(t,e,s){}});
//# sourceMappingURL=app.ef5a469f.js.map