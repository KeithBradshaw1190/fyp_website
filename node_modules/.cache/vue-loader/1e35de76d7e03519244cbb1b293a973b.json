{"remainingRequest":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\src\\components\\SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\src\\components\\SignIn.vue","mtime":1587388004237},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAiLi4vZmlyZWJhc2VJbml0IjsNCmltcG9ydCBmaXJlYmFzZSwgeyBmdW5jdGlvbnMgfSBmcm9tICJmaXJlYmFzZSI7DQppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlciI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KY29uc3QgZGIgPSBmaXJlYmFzZUFwcC5maXJlc3RvcmUoKTsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInNpZ25pbiIsDQogIGRhdGE6IGZ1bmN0aW9uKCkgew0KICAgIHJldHVybiB7DQogICAgICBlbWFpbDogIiIsDQogICAgICBwYXNzd29yZDogIiIsDQogICAgICBjdXJyZW50VXNlcjogZmlyZWJhc2VBcHAuYXV0aCgpLmN1cnJlbnRVc2VyDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFVybFZhcnM6IGZ1bmN0aW9uKCkgew0KICAgICAgdmFyIHZhcnMgPSB7fTsNCiAgICAgIHZhciBwYXJ0cyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoDQogICAgICAgIC9bPyZdKyhbXj0mXSspPShbXiZdKikvZ2ksDQogICAgICAgIGZ1bmN0aW9uKG0sIGtleSwgdmFsdWUpIHsNCiAgICAgICAgICB2YXJzW2tleV0gPSB2YWx1ZTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICAgIHJldHVybiB2YXJzOw0KICAgIH0sDQogICAgZ2V0VXJsUGFyYW06IGZ1bmN0aW9uKHBhcmFtZXRlciwgZGVmYXVsdHZhbHVlKSB7DQogICAgICB2YXIgdXJscGFyYW1ldGVyID0gZGVmYXVsdHZhbHVlOw0KICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocGFyYW1ldGVyKSA+IC0xKSB7DQogICAgICAgIHVybHBhcmFtZXRlciA9IHRoaXMuZ2V0VXJsVmFycygpW3BhcmFtZXRlcl07DQogICAgICB9DQogICAgICByZXR1cm4gdXJscGFyYW1ldGVyOw0KICAgIH0sDQogICAgc2lnbmluOiBmdW5jdGlvbihlKSB7DQogICAgICAvL0FjY2VzcyB0aGUgdmVyaWZpY2F0aW9uIHBhcmFtZXRlcnMNCg0KICAgICAgdmFyIHVybF9zdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsNCiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKHVybF9zdHJpbmcpOw0KICAgICAgdmFyIGFjY291bnRfdG9rZW4gPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgiYWNjb3VudF9saW5raW5nX3Rva2VuIik7DQogICAgICB2YXIgYWNjZXNzX3Rva2VuID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9GQl9QQUdFX0FDQ0VTU19UT0tFTjsNCg0KICAgICAgdmFyIHJfdXJpID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoInJlZGlyZWN0X3VyaSIpOw0KDQogICAgICBjb25zb2xlLmxvZyhhY2NvdW50X3Rva2VuKTsNCiAgICAgIGNvbnNvbGUubG9nKHJfdXJpKTsNCiAgICAgIGlmIChhY2NvdW50X3Rva2VuICE9IG51bGwgJiYgcl91cmkpIHsNCiAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTsNCiAgICAgICAgZmlyZWJhc2VBcHANCiAgICAgICAgICAuYXV0aCgpDQogICAgICAgICAgLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikNCiAgICAgICAgICAudGhlbihyZXN1bHQgPT4gew0KICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0LmNyZWRlbnRpYWwuYWNjZXNzVG9rZW47DQogICAgICAgICAgICAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby4NCiAgICAgICAgICAgIHZhciB1c2VyID0gcmVzdWx0LnVzZXI7DQogICAgICAgICAgICBhbGVydCgNCiAgICAgICAgICAgICAgYEFsZXJ0IDEgTG9naW4gc3VjY2Vzc2Z1bCBmb3IgJHt1c2VyLnByb3ZpZGVyRGF0YVswXS5kaXNwbGF5TmFtZX1gDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgZmlyZWJhc2VBcHANCiAgICAgICAgICAgICAgLmF1dGgoKQ0KICAgICAgICAgICAgICAuY3VycmVudFVzZXIudXBkYXRlUHJvZmlsZSh7DQogICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHVzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURvYyh1c2VyLCBhY2NvdW50X3Rva2VuLCBhY2Nlc3NfdG9rZW4sIHJfdXJpKTsNCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpcmViYXNlQXBwLmF1dGgoKS5jdXJyZW50VXNlcik7DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnIubWVzc2FnZTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSkNCg0KICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLg0KICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7DQogICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTsNCiAgICAgICAgICAgIC8vIFRoZSBlbWFpbCBvZiB0aGUgdXNlcidzIGFjY291bnQgdXNlZC4NCiAgICAgICAgICAgIHZhciBlbWFpbCA9IGVycm9yLmVtYWlsOw0KICAgICAgICAgICAgLy8gVGhlIGZpcmViYXNlLmF1dGguQXV0aENyZWRlbnRpYWwgdHlwZSB0aGF0IHdhcyB1c2VkLg0KICAgICAgICAgICAgdmFyIGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsOw0KICAgICAgICAgICAgLy8gLi4uDQogICAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB2YXIgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5GYWNlYm9va0F1dGhQcm92aWRlcigpOw0KICAgICAgICBmaXJlYmFzZUFwcA0KICAgICAgICAgIC5hdXRoKCkNCiAgICAgICAgICAuc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKQ0KICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7DQogICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHQuY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjsNCiAgICAgICAgICAgIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLg0KICAgICAgICAgICAgdmFyIHVzZXIgPSByZXN1bHQudXNlcjsNCiAgICAgICAgICAgIGFsZXJ0KA0KICAgICAgICAgICAgICBgQWxlcnQgMiBMb2dpbiBzdWNjZXNzZnVsIGZvciAke3VzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lfWANCiAgICAgICAgICAgICk7DQogICAgICAgICAgICBmaXJlYmFzZUFwcA0KICAgICAgICAgICAgICAuYXV0aCgpDQogICAgICAgICAgICAgIC5jdXJyZW50VXNlci51cGRhdGVQcm9maWxlKHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogdXNlci5wcm92aWRlckRhdGFbMF0uZGlzcGxheU5hbWUNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBmaXJlYmFzZUFwcC5hdXRoKCkuY3VycmVudFVzZXI7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICAgICAgICAgICAiVGhlbiAiICsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VXNlci51aWQgKw0KICAgICAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZUFwcC5hdXRoKCkuY3VycmVudFVzZXINCiAgICAgICAgICAgICAgICApOw0KDQogICAgICAgICAgICAgICAgZGIuY29sbGVjdGlvbigidXNlcnMiKQ0KICAgICAgICAgICAgICAgICAgLmRvYyh0aGlzLmN1cnJlbnRVc2VyLnVpZCkNCiAgICAgICAgICAgICAgICAgIC5zZXQoDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLnByb3ZpZGVyRGF0YVswXS5kaXNwbGF5TmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICBmYWNlYm9va0lEOiB1c2VyLnByb3ZpZGVyRGF0YVswXS51aWQNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgeyBtZXJnZTogdHJ1ZSB9DQogICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGEoKTsNCiAgICAgICAgICAgICAgICAgICAgcm91dGVyLmdvKHsgbmFtZTogImdyb2NlcnlEYXNoYm9hcmQiIH0pOw0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVyci5tZXNzYWdlOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnIubWVzc2FnZTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSkNCg0KICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLg0KICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7DQogICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTsNCiAgICAgICAgICAgIC8vIFRoZSBlbWFpbCBvZiB0aGUgdXNlcidzIGFjY291bnQgdXNlZC4NCiAgICAgICAgICAgIHZhciBlbWFpbCA9IGVycm9yLmVtYWlsOw0KICAgICAgICAgICAgLy8gVGhlIGZpcmViYXNlLmF1dGguQXV0aENyZWRlbnRpYWwgdHlwZSB0aGF0IHdhcyB1c2VkLg0KICAgICAgICAgICAgdmFyIGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsOw0KICAgICAgICAgICAgLy8gLi4uDQogICAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBsb2FkRGF0YTogZnVuY3Rpb24oKSB7DQogICAgICBjb25zb2xlLmxvZygiQ2hlY2tpbmcgc3RvcmFnZSIgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzdG9yZUlkIikpOw0KICAgICAgY29uc29sZS5sb2coInVpZDogIiArIHRoaXMuY3VycmVudFVzZXIudWlkKTsNCg0KICAgICAgLy8geW91IGNhbiBsb2FkIGRhdGEgZnJvbSBoZXJlIGFuZCBhc3NpZ24gcmVzcG9uc2UgaW4gdG8gdmFyaWFibGUNCiAgICAgIGRiLmNvbGxlY3Rpb24oInVzZXJzIikNCiAgICAgICAgLmRvYyh0aGlzLmN1cnJlbnRVc2VyLnVpZCkNCiAgICAgICAgLmdldCgpDQogICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvYykgew0KICAgICAgICAgIGlmIChkb2MuZXhpc3RzICYmIGRvYy5nZXQoInN0b3JlSWQiKSkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coZG9jLmdldCgic3RvcmVJZCIpKTsNCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInN0b3JlSWQiLCBkb2MuZ2V0KCJzdG9yZUlkIikpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7DQogICAgICAgICAgY29uc29sZS5sb2coIkVycm9yIGdldHRpbmcgZG9jdW1lbnQ6IiwgZXJyb3IpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGFkZFRvU2hvcHBpbmdMaXN0cyhyZXNwLCByX3VyaSkgew0KICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGZpcmViYXNlQXBwLmF1dGgoKS5jdXJyZW50VXNlcjsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudFVzZXIudWlkKTsNCiAgICAgIGNvbnNvbGUubG9nKCJhZGR0b3Nob3BwaW5nIGxpc3RzIik7DQogICAgICBjb25zdCBuZXdEb2N1bWVudEJvZHkgPSB7DQogICAgICAgIG1lc3NlbmdlcklEOiByZXNwLmRhdGEucmVjaXBpZW50DQogICAgICB9Ow0KICAgICAgZGIuY29sbGVjdGlvbigic2hvcHBpbmdfbGlzdHMiKQ0KICAgICAgICAud2hlcmUoInVpZCIsICI9PSIsIHRoaXMuY3VycmVudFVzZXIudWlkKQ0KICAgICAgICAuZ2V0KCkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIGxldCBiYXRjaCA9IGRiLmJhdGNoKCk7DQogICAgICAgICAgcmVzcG9uc2UuZG9jcy5mb3JFYWNoKGRvYyA9PiB7DQogICAgICAgICAgICBjb25zdCBkb2NSZWYgPSBmaXJlYmFzZQ0KICAgICAgICAgICAgICAuZmlyZXN0b3JlKCkNCiAgICAgICAgICAgICAgLmNvbGxlY3Rpb24oInNob3BwaW5nX2xpc3RzIikNCiAgICAgICAgICAgICAgLmRvYyhkb2MuaWQpOw0KICAgICAgICAgICAgYmF0Y2gudXBkYXRlKGRvY1JlZiwgbmV3RG9jdW1lbnRCb2R5KTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBiYXRjaC5jb21taXQoKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGB1cGRhdGVkIGFsbCBkb2N1bWVudHMgaW5zaWRlYCk7DQogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9DQogICAgICAgICAgICAgIHJfdXJpICsgIiZhdXRob3JpemF0aW9uX2NvZGU9IiArIHRoaXMuY3VycmVudFVzZXIudWlkOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7DQoNCiAgICAgICAgICBjb25zb2xlLmxvZygiTm8gU2hvcHBpbmcgbGlzdHMgeWV0Iik7DQogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPQ0KICAgICAgICAgICAgcl91cmkgKyAiJmF1dGhvcml6YXRpb25fY29kZT0iICsgdGhpcy5jdXJyZW50VXNlci51aWQ7DQogICAgICAgIH0pOw0KICAgIH0sDQoNCiAgICB1cGRhdGVEb2M6IGZ1bmN0aW9uKHVzZXIsIGFjY291bnRfdG9rZW4sIGFjY2Vzc190b2tlbiwgcl91cmkpIHsNCiAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBmaXJlYmFzZUFwcC5hdXRoKCkuY3VycmVudFVzZXI7DQogICAgIC8vIGNvbnNvbGUubG9nKCJQQUdFIEFDQ0VTUyBUT0tFTiIgKyBhY2Nlc3NfdG9rZW4pOw0KICAgICAgYXhpb3MNCiAgICAgICAgLmdldCgNCiAgICAgICAgICAiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjIuNi9tZT9hY2Nlc3NfdG9rZW49IiArDQogICAgICAgICAgICBhY2Nlc3NfdG9rZW4gKw0KICAgICAgICAgICAgIiZmaWVsZHM9cmVjaXBpZW50JmFjY291bnRfbGlua2luZ190b2tlbj0iICsNCiAgICAgICAgICAgIGFjY291bnRfdG9rZW4NCiAgICAgICAgKQ0KICAgICAgICAudGhlbihyZXNwID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEucmVjaXBpZW50KTsNCiAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpDQogICAgICAgICAgICAuZG9jKHRoaXMuY3VycmVudFVzZXIudWlkKQ0KICAgICAgICAgICAgLnVwZGF0ZSh7DQogICAgICAgICAgICAgIG5hbWU6IHVzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lLA0KICAgICAgICAgICAgICBmYWNlYm9va0lEOiB1c2VyLnByb3ZpZGVyRGF0YVswXS51aWQsDQogICAgICAgICAgICAgIG1lc3NlbmdlcklEOiByZXNwLmRhdGEucmVjaXBpZW50DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygidGhlbiIpOw0KICAgICAgICAgICAgICB0aGlzLmFkZFRvU2hvcHBpbmdMaXN0cyhyZXNwLCByX3VyaSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnIubWVzc2FnZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignIn.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"signIn\">\r\n    <button type=\"button\" @click=\"signin\" class=\"btn\" style=\"background-color:#3b5998;\">\r\n      <i class=\"fab fa-facebook-f pr-1\"></i>Sign in with Facebook\r\n    </button>\r\n\r\n  \r\n  </div>\r\n</template>\r\n\r\n<style>\r\n</style>\r\n<script>\r\nimport firebaseApp from \"../firebaseInit\";\r\nimport firebase, { functions } from \"firebase\";\r\nimport router from \"../router\";\r\nimport axios from \"axios\";\r\nconst db = firebaseApp.firestore();\r\nexport default {\r\n  name: \"signin\",\r\n  data: function() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n      currentUser: firebaseApp.auth().currentUser\r\n    };\r\n  },\r\n  methods: {\r\n    getUrlVars: function() {\r\n      var vars = {};\r\n      var parts = window.location.href.replace(\r\n        /[?&]+([^=&]+)=([^&]*)/gi,\r\n        function(m, key, value) {\r\n          vars[key] = value;\r\n        }\r\n      );\r\n      return vars;\r\n    },\r\n    getUrlParam: function(parameter, defaultvalue) {\r\n      var urlparameter = defaultvalue;\r\n      if (window.location.href.indexOf(parameter) > -1) {\r\n        urlparameter = this.getUrlVars()[parameter];\r\n      }\r\n      return urlparameter;\r\n    },\r\n    signin: function(e) {\r\n      //Access the verification parameters\r\n\r\n      var url_string = window.location.href;\r\n      var url = new URL(url_string);\r\n      var account_token = url.searchParams.get(\"account_linking_token\");\r\n      var access_token = process.env.VUE_APP_FB_PAGE_ACCESS_TOKEN;\r\n\r\n      var r_uri = url.searchParams.get(\"redirect_uri\");\r\n\r\n      console.log(account_token);\r\n      console.log(r_uri);\r\n      if (account_token != null && r_uri) {\r\n        var provider = new firebase.auth.FacebookAuthProvider();\r\n        firebaseApp\r\n          .auth()\r\n          .signInWithPopup(provider)\r\n          .then(result => {\r\n            var token = result.credential.accessToken;\r\n            // The signed-in user info.\r\n            var user = result.user;\r\n            alert(\r\n              `Alert 1 Login successful for ${user.providerData[0].displayName}`\r\n            );\r\n            firebaseApp\r\n              .auth()\r\n              .currentUser.updateProfile({\r\n                displayName: user.providerData[0].displayName\r\n              })\r\n              .then(() => {\r\n                this.updateDoc(user, account_token, access_token, r_uri);\r\n                //console.log(firebaseApp.auth().currentUser);\r\n              })\r\n              .catch(err => {\r\n                console.log(err);\r\n                this.errorMessage = err.message;\r\n              });\r\n          })\r\n\r\n          .catch(function(error) {\r\n            console.log(error);\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // The email of the user's account used.\r\n            var email = error.email;\r\n            // The firebase.auth.AuthCredential type that was used.\r\n            var credential = error.credential;\r\n            // ...\r\n          });\r\n      } else {\r\n        var provider = new firebase.auth.FacebookAuthProvider();\r\n        firebaseApp\r\n          .auth()\r\n          .signInWithPopup(provider)\r\n          .then(result => {\r\n            var token = result.credential.accessToken;\r\n            // The signed-in user info.\r\n            var user = result.user;\r\n            alert(\r\n              `Alert 2 Login successful for ${user.providerData[0].displayName}`\r\n            );\r\n            firebaseApp\r\n              .auth()\r\n              .currentUser.updateProfile({\r\n                displayName: user.providerData[0].displayName\r\n              })\r\n              .then(() => {\r\n                this.currentUser = firebaseApp.auth().currentUser;\r\n                console.log(\r\n                  \"Then \" +\r\n                    this.currentUser.uid +\r\n                    \" \" +\r\n                    firebaseApp.auth().currentUser\r\n                );\r\n\r\n                db.collection(\"users\")\r\n                  .doc(this.currentUser.uid)\r\n                  .set(\r\n                    {\r\n                      name: user.providerData[0].displayName,\r\n                      facebookID: user.providerData[0].uid\r\n                    },\r\n                    { merge: true }\r\n                  )\r\n                  .then(() => {\r\n                    this.loadData();\r\n                    router.go({ name: \"groceryDashboard\" });\r\n                  })\r\n                  .catch(err => {\r\n                    this.errorMessage = err.message;\r\n                  });\r\n              })\r\n              .catch(err => {\r\n                console.log(err);\r\n                this.errorMessage = err.message;\r\n              });\r\n          })\r\n\r\n          .catch(function(error) {\r\n            console.log(error);\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // The email of the user's account used.\r\n            var email = error.email;\r\n            // The firebase.auth.AuthCredential type that was used.\r\n            var credential = error.credential;\r\n            // ...\r\n          });\r\n      }\r\n    },\r\n    loadData: function() {\r\n      console.log(\"Checking storage\" + sessionStorage.getItem(\"storeId\"));\r\n      console.log(\"uid: \" + this.currentUser.uid);\r\n\r\n      // you can load data from here and assign response in to variable\r\n      db.collection(\"users\")\r\n        .doc(this.currentUser.uid)\r\n        .get()\r\n        .then(function(doc) {\r\n          if (doc.exists && doc.get(\"storeId\")) {\r\n            console.log(doc.get(\"storeId\"));\r\n            sessionStorage.setItem(\"storeId\", doc.get(\"storeId\"));\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          console.log(\"Error getting document:\", error);\r\n        });\r\n    },\r\n    addToShoppingLists(resp, r_uri) {\r\n      this.currentUser = firebaseApp.auth().currentUser;\r\n      console.log(this.currentUser.uid);\r\n      console.log(\"addtoshopping lists\");\r\n      const newDocumentBody = {\r\n        messengerID: resp.data.recipient\r\n      };\r\n      db.collection(\"shopping_lists\")\r\n        .where(\"uid\", \"==\", this.currentUser.uid)\r\n        .get()\r\n        .then(response => {\r\n          let batch = db.batch();\r\n          response.docs.forEach(doc => {\r\n            const docRef = firebase\r\n              .firestore()\r\n              .collection(\"shopping_lists\")\r\n              .doc(doc.id);\r\n            batch.update(docRef, newDocumentBody);\r\n          });\r\n          batch.commit().then(() => {\r\n            console.log(`updated all documents inside`);\r\n            window.location.href =\r\n              r_uri + \"&authorization_code=\" + this.currentUser.uid;\r\n          });\r\n        })\r\n        .catch(err => {\r\n          console.log(err.message);\r\n\r\n          console.log(\"No Shopping lists yet\");\r\n          window.location.href =\r\n            r_uri + \"&authorization_code=\" + this.currentUser.uid;\r\n        });\r\n    },\r\n\r\n    updateDoc: function(user, account_token, access_token, r_uri) {\r\n      this.currentUser = firebaseApp.auth().currentUser;\r\n     // console.log(\"PAGE ACCESS TOKEN\" + access_token);\r\n      axios\r\n        .get(\r\n          \"https://graph.facebook.com/v2.6/me?access_token=\" +\r\n            access_token +\r\n            \"&fields=recipient&account_linking_token=\" +\r\n            account_token\r\n        )\r\n        .then(resp => {\r\n          console.log(resp.data.recipient);\r\n          db.collection(\"users\")\r\n            .doc(this.currentUser.uid)\r\n            .update({\r\n              name: user.providerData[0].displayName,\r\n              facebookID: user.providerData[0].uid,\r\n              messengerID: resp.data.recipient\r\n            })\r\n            .then(() => {\r\n              console.log(\"then\");\r\n              this.addToShoppingLists(resp, r_uri);\r\n            })\r\n            .catch(err => {\r\n              console.log(err.message);\r\n              this.errorMessage = err.message;\r\n            });\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.btn {\r\n  display: inline-block;\r\n  background: var(--primary-color);\r\n  color: #fff;\r\n  padding: 0.8rem 1.5rem;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  border-radius: 30px;\r\n  margin-top: 0.2rem;\r\n}\r\n</style>"]}]}