{"remainingRequest":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\src\\components\\SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\src\\components\\SignIn.vue","mtime":1587240345905},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAiLi4vZmlyZWJhc2VJbml0IjsNCmltcG9ydCBmaXJlYmFzZSwgeyBmdW5jdGlvbnMgfSBmcm9tICJmaXJlYmFzZSI7DQppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlciI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KY29uc3QgZGIgPSBmaXJlYmFzZUFwcC5maXJlc3RvcmUoKTsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInNpZ25pbiIsDQogIGRhdGE6IGZ1bmN0aW9uKCkgew0KICAgIHJldHVybiB7DQogICAgICBlbWFpbDogIiIsDQogICAgICBwYXNzd29yZDogIiIsDQogICAgICBjdXJyZW50VXNlcjogZmlyZWJhc2VBcHAuYXV0aCgpLmN1cnJlbnRVc2VyDQogICAgfTsNCiAgfSxjcmVhdGVkKCl7DQogICAgdmFyIHVybF9zdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsNCiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKHVybF9zdHJpbmcpOw0KICAgICAgdmFyIGFjY291bnRfdG9rZW4gPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgiYWNjb3VudF9saW5raW5nX3Rva2VuIik7DQogICAgICBpZihhY2NvdW50X3Rva2VuIT1udWxsKXsNCiAgICAgICAgDQogICAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRVcmxWYXJzOiBmdW5jdGlvbigpIHsNCiAgICAgIHZhciB2YXJzID0ge307DQogICAgICB2YXIgcGFydHMgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKA0KICAgICAgICAvWz8mXSsoW149Jl0rKT0oW14mXSopL2dpLA0KICAgICAgICBmdW5jdGlvbihtLCBrZXksIHZhbHVlKSB7DQogICAgICAgICAgdmFyc1trZXldID0gdmFsdWU7DQogICAgICAgIH0NCiAgICAgICk7DQogICAgICByZXR1cm4gdmFyczsNCiAgICB9LA0KICAgIGdldFVybFBhcmFtOiBmdW5jdGlvbihwYXJhbWV0ZXIsIGRlZmF1bHR2YWx1ZSkgew0KICAgICAgdmFyIHVybHBhcmFtZXRlciA9IGRlZmF1bHR2YWx1ZTsNCiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKHBhcmFtZXRlcikgPiAtMSkgew0KICAgICAgICB1cmxwYXJhbWV0ZXIgPSB0aGlzLmdldFVybFZhcnMoKVtwYXJhbWV0ZXJdOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHVybHBhcmFtZXRlcjsNCiAgICB9LA0KICAgIHNpZ25pbjogZnVuY3Rpb24oZSkgew0KICAgICAgLy9BY2Nlc3MgdGhlIHZlcmlmaWNhdGlvbiBwYXJhbWV0ZXJzDQoNCiAgICAgIHZhciB1cmxfc3RyaW5nID0gd2luZG93LmxvY2F0aW9uLmhyZWY7DQogICAgICB2YXIgdXJsID0gbmV3IFVSTCh1cmxfc3RyaW5nKTsNCiAgICAgIHZhciBhY2NvdW50X3Rva2VuID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoImFjY291bnRfbGlua2luZ190b2tlbiIpOw0KICAgICAgdmFyIGFjY2Vzc190b2tlbiA9IHByb2Nlc3MuZW52LlZVRV9BUFBfRkJfUEFHRV9BQ0NFU1NfVE9LRU47DQoNCiAgICAgIHZhciByX3VyaSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCJyZWRpcmVjdF91cmkiKTsNCg0KICAgICAgY29uc29sZS5sb2coYWNjb3VudF90b2tlbik7DQogICAgICBjb25zb2xlLmxvZyhyX3VyaSk7DQogICAgICBpZiAoYWNjb3VudF90b2tlbiAhPSBudWxsICYmIHJfdXJpKSB7DQogICAgICAgIHZhciBwcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkZhY2Vib29rQXV0aFByb3ZpZGVyKCk7DQogICAgICAgIGZpcmViYXNlQXBwDQogICAgICAgICAgLmF1dGgoKQ0KICAgICAgICAgIC5zaWduSW5XaXRoUG9wdXAocHJvdmlkZXIpDQogICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHsNCiAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdC5jcmVkZW50aWFsLmFjY2Vzc1Rva2VuOw0KICAgICAgICAgICAgLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uDQogICAgICAgICAgICB2YXIgdXNlciA9IHJlc3VsdC51c2VyOw0KICAgICAgICAgICAgYWxlcnQoYEFsZXJ0IDEgTG9naW4gc3VjY2Vzc2Z1bCBmb3IgJHt1c2VyLnByb3ZpZGVyRGF0YVswXS5kaXNwbGF5TmFtZX1gKTsNCiAgICAgICAgICAgIGZpcmViYXNlQXBwDQogICAgICAgICAgICAgIC5hdXRoKCkNCiAgICAgICAgICAgICAgLmN1cnJlbnRVc2VyLnVwZGF0ZVByb2ZpbGUoew0KICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB1c2VyLnByb3ZpZGVyRGF0YVswXS5kaXNwbGF5TmFtZQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEb2ModXNlciwgYWNjb3VudF90b2tlbiwgYWNjZXNzX3Rva2VuLCByX3VyaSk7DQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhmaXJlYmFzZUFwcC5hdXRoKCkuY3VycmVudFVzZXIpOw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyLm1lc3NhZ2U7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pDQoNCiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgICAgIC8vIEhhbmRsZSBFcnJvcnMgaGVyZS4NCiAgICAgICAgICAgIHZhciBlcnJvckNvZGUgPSBlcnJvci5jb2RlOw0KICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7DQogICAgICAgICAgICAvLyBUaGUgZW1haWwgb2YgdGhlIHVzZXIncyBhY2NvdW50IHVzZWQuDQogICAgICAgICAgICB2YXIgZW1haWwgPSBlcnJvci5lbWFpbDsNCiAgICAgICAgICAgIC8vIFRoZSBmaXJlYmFzZS5hdXRoLkF1dGhDcmVkZW50aWFsIHR5cGUgdGhhdCB3YXMgdXNlZC4NCiAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0gZXJyb3IuY3JlZGVudGlhbDsNCiAgICAgICAgICAgIC8vIC4uLg0KICAgICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTsNCiAgICAgICAgZmlyZWJhc2VBcHANCiAgICAgICAgICAuYXV0aCgpDQogICAgICAgICAgLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikNCiAgICAgICAgICAudGhlbihyZXN1bHQgPT4gew0KICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0LmNyZWRlbnRpYWwuYWNjZXNzVG9rZW47DQogICAgICAgICAgICAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby4NCiAgICAgICAgICAgIHZhciB1c2VyID0gcmVzdWx0LnVzZXI7DQogICAgICAgICAgICBhbGVydChgQWxlcnQgMiBMb2dpbiBzdWNjZXNzZnVsIGZvciAke3VzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lfWApOw0KICAgICAgICAgICAgZmlyZWJhc2VBcHANCiAgICAgICAgICAgICAgLmF1dGgoKQ0KICAgICAgICAgICAgICAuY3VycmVudFVzZXIudXBkYXRlUHJvZmlsZSh7DQogICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHVzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gZmlyZWJhc2VBcHAuYXV0aCgpLmN1cnJlbnRVc2VyOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJUaGVuICIrdGhpcy5jdXJyZW50VXNlci51aWQrIiAiK2ZpcmViYXNlQXBwLmF1dGgoKS5jdXJyZW50VXNlcik7DQoNCiAgICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpDQogICAgICAgICAgICAgICAgICAuZG9jKHRoaXMuY3VycmVudFVzZXIudWlkKQ0KICAgICAgICAgICAgICAgICAgLnNldCh7DQogICAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lLA0KICAgICAgICAgICAgICAgICAgICBmYWNlYm9va0lEOiB1c2VyLnByb3ZpZGVyRGF0YVswXS51aWQNCiAgICAgICAgICAgICAgICAgIH0se21lcmdlOiB0cnVlfSkNCiAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YSgpOw0KICAgICAgICAgICAgICAgICAgICByb3V0ZXIuZ28oeyBuYW1lOiAiZ3JvY2VyeURhc2hib2FyZCIgfSk7DQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyLm1lc3NhZ2U7DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVyci5tZXNzYWdlOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KQ0KDQogICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgICAvLyBIYW5kbGUgRXJyb3JzIGhlcmUuDQogICAgICAgICAgICB2YXIgZXJyb3JDb2RlID0gZXJyb3IuY29kZTsNCiAgICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlOw0KICAgICAgICAgICAgLy8gVGhlIGVtYWlsIG9mIHRoZSB1c2VyJ3MgYWNjb3VudCB1c2VkLg0KICAgICAgICAgICAgdmFyIGVtYWlsID0gZXJyb3IuZW1haWw7DQogICAgICAgICAgICAvLyBUaGUgZmlyZWJhc2UuYXV0aC5BdXRoQ3JlZGVudGlhbCB0eXBlIHRoYXQgd2FzIHVzZWQuDQogICAgICAgICAgICB2YXIgY3JlZGVudGlhbCA9IGVycm9yLmNyZWRlbnRpYWw7DQogICAgICAgICAgICAvLyAuLi4NCiAgICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGxvYWREYXRhOiBmdW5jdGlvbigpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJDaGVja2luZyBzdG9yYWdlIiArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInN0b3JlSWQiKSk7DQogICAgICBjb25zb2xlLmxvZygidWlkOiAiICsgdGhpcy5jdXJyZW50VXNlci51aWQpOw0KDQogICAgICAvLyB5b3UgY2FuIGxvYWQgZGF0YSBmcm9tIGhlcmUgYW5kIGFzc2lnbiByZXNwb25zZSBpbiB0byB2YXJpYWJsZQ0KICAgICAgZGIuY29sbGVjdGlvbigidXNlcnMiKQ0KICAgICAgICAuZG9jKHRoaXMuY3VycmVudFVzZXIudWlkKQ0KICAgICAgICAuZ2V0KCkNCiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9jKSB7DQogICAgICAgICAgaWYgKGRvYy5leGlzdHMgJiYgZG9jLmdldCgic3RvcmVJZCIpKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhkb2MuZ2V0KCJzdG9yZUlkIikpOw0KICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgic3RvcmVJZCIsIGRvYy5nZXQoInN0b3JlSWQiKSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IgZ2V0dGluZyBkb2N1bWVudDoiLCBlcnJvcik7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgYWRkVG9TaG9wcGluZ0xpc3RzKHJlc3AsIHJfdXJpKSB7DQogICAgICB0aGlzLmN1cnJlbnRVc2VyID0gZmlyZWJhc2VBcHAuYXV0aCgpLmN1cnJlbnRVc2VyOw0KICAgICAgY29uc29sZS5sb2codGhpcy5jdXJyZW50VXNlci51aWQpOw0KICAgICAgY29uc29sZS5sb2coImFkZHRvc2hvcHBpbmcgbGlzdHMiKTsNCiAgICAgIGNvbnN0IG5ld0RvY3VtZW50Qm9keSA9IHsNCiAgICAgICAgbWVzc2VuZ2VySUQ6IHJlc3AuZGF0YS5yZWNpcGllbnQNCiAgICAgIH07DQogICAgICBkYi5jb2xsZWN0aW9uKCJzaG9wcGluZ19saXN0cyIpDQogICAgICAgIC53aGVyZSgidWlkIiwgIj09IiwgdGhpcy5jdXJyZW50VXNlci51aWQpDQogICAgICAgIC5nZXQoKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgbGV0IGJhdGNoID0gZGIuYmF0Y2goKTsNCiAgICAgICAgICByZXNwb25zZS5kb2NzLmZvckVhY2goZG9jID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGRvY1JlZiA9IGZpcmViYXNlDQogICAgICAgICAgICAgIC5maXJlc3RvcmUoKQ0KICAgICAgICAgICAgICAuY29sbGVjdGlvbigic2hvcHBpbmdfbGlzdHMiKQ0KICAgICAgICAgICAgICAuZG9jKGRvYy5pZCk7DQogICAgICAgICAgICBiYXRjaC51cGRhdGUoZG9jUmVmLCBuZXdEb2N1bWVudEJvZHkpOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGJhdGNoLmNvbW1pdCgpLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coYHVwZGF0ZWQgYWxsIGRvY3VtZW50cyBpbnNpZGVgKTsNCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0NCiAgICAgICAgICAgICAgcl91cmkgKyAiJmF1dGhvcml6YXRpb25fY29kZT0iICsgdGhpcy5jdXJyZW50VXNlci51aWQ7DQogICAgICAgICAgfSk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsNCg0KICAgICAgICAgIGNvbnNvbGUubG9nKCJObyBTaG9wcGluZyBsaXN0cyB5ZXQiKTsNCiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9DQogICAgICAgICAgICByX3VyaSArICImYXV0aG9yaXphdGlvbl9jb2RlPSIgKyB0aGlzLmN1cnJlbnRVc2VyLnVpZDsNCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIHVwZGF0ZURvYzogZnVuY3Rpb24odXNlciwgYWNjb3VudF90b2tlbiwgYWNjZXNzX3Rva2VuLCByX3VyaSkgew0KICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGZpcmViYXNlQXBwLmF1dGgoKS5jdXJyZW50VXNlcjsNCiAgICAgIGNvbnNvbGUubG9nKCJQQUdFIEFDQ0VTUyBUT0tFTiIgKyBhY2Nlc3NfdG9rZW4pOw0KICAgICAgYXhpb3MNCiAgICAgICAgLmdldCgNCiAgICAgICAgICAiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjIuNi9tZT9hY2Nlc3NfdG9rZW49IiArDQogICAgICAgICAgICBhY2Nlc3NfdG9rZW4gKw0KICAgICAgICAgICAgIiZmaWVsZHM9cmVjaXBpZW50JmFjY291bnRfbGlua2luZ190b2tlbj0iICsNCiAgICAgICAgICAgIGFjY291bnRfdG9rZW4NCiAgICAgICAgKQ0KICAgICAgICAudGhlbihyZXNwID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEucmVjaXBpZW50KTsNCiAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpDQogICAgICAgICAgICAuZG9jKHRoaXMuY3VycmVudFVzZXIudWlkKQ0KICAgICAgICAgICAgLnVwZGF0ZSh7DQogICAgICAgICAgICAgIG5hbWU6IHVzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lLA0KICAgICAgICAgICAgICBmYWNlYm9va0lEOiB1c2VyLnByb3ZpZGVyRGF0YVswXS51aWQsDQogICAgICAgICAgICAgIG1lc3NlbmdlcklEOiByZXNwLmRhdGEucmVjaXBpZW50DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygidGhlbiIpOw0KICAgICAgICAgICAgICB0aGlzLmFkZFRvU2hvcHBpbmdMaXN0cyhyZXNwLCByX3VyaSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnIubWVzc2FnZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9DQogICAgLy8gc2lnbmluOiBmdW5jdGlvbihlKSB7DQogICAgLy8gICBmYi5hdXRoKCkNCiAgICAvLyAgICAgLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKHRoaXMuZW1haWwsIHRoaXMucGFzc3dvcmQpDQogICAgLy8gICAgIC50aGVuKA0KICAgIC8vICAgICAgIHVzZXIgPT4gew0KICAgIC8vICAgICAgICAgYWxlcnQoYExvZ2luIHN1Y2Nlc3NmdWwgZm9yICR7dXNlci51c2VyLmVtYWlsfWApOw0KICAgIC8vICAgICAgICAgcm91dGVyLmdvKHsgbmFtZTogImdyb2NlcnlEYXNoYm9hcmQiIH0pOw0KICAgIC8vICAgICAgICAgY29uc29sZS5sb2codXNlcik7DQogICAgLy8gICAgICAgfSwNCiAgICAvLyAgICAgICBlcnIgPT4gew0KICAgIC8vICAgICAgICAgYWxlcnQoImVycm9yICIgKyBlcnIubWVzc2FnZSk7DQogICAgLy8gICAgICAgfQ0KICAgIC8vICAgICApOw0KICAgIC8vICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgIC8vIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignIn.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"signIn\">\r\n    <button type=\"button\" @click=\"signin\" class=\"btn\" style=\"background-color:#3b5998;\">\r\n      <i class=\"fab fa-facebook-f pr-1\"></i>Sign in with Facebook\r\n    </button>\r\n\r\n    <!-- <form class=\"form-signin\">\r\n              <div class=\"form-label-group\">\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"inputEmail\"\r\n                  class=\"form-control\"\r\n                  v-model=\"email\"\r\n                  placeholder=\"Email address\"\r\n                  required\r\n                  autofocus\r\n                />\r\n              </div>\r\n              <br />\r\n              <div class=\"form-label-group\">\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  class=\"form-control\"\r\n                  v-model=\"password\"\r\n                  placeholder=\"Password\"\r\n                  required\r\n                />\r\n              </div>\r\n              <br />\r\n              <button\r\n                class=\"btn btn-lg btn-primary btn-outline-primary\"\r\n                @click=\"signin\"\r\n                type=\"submit\"\r\n              >Log In</button>\r\n    </form>-->\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n</style>\r\n<script>\r\nimport firebaseApp from \"../firebaseInit\";\r\nimport firebase, { functions } from \"firebase\";\r\nimport router from \"../router\";\r\nimport axios from \"axios\";\r\nconst db = firebaseApp.firestore();\r\nexport default {\r\n  name: \"signin\",\r\n  data: function() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n      currentUser: firebaseApp.auth().currentUser\r\n    };\r\n  },created(){\r\n    var url_string = window.location.href;\r\n      var url = new URL(url_string);\r\n      var account_token = url.searchParams.get(\"account_linking_token\");\r\n      if(account_token!=null){\r\n        \r\n      }\r\n  },\r\n  methods: {\r\n    getUrlVars: function() {\r\n      var vars = {};\r\n      var parts = window.location.href.replace(\r\n        /[?&]+([^=&]+)=([^&]*)/gi,\r\n        function(m, key, value) {\r\n          vars[key] = value;\r\n        }\r\n      );\r\n      return vars;\r\n    },\r\n    getUrlParam: function(parameter, defaultvalue) {\r\n      var urlparameter = defaultvalue;\r\n      if (window.location.href.indexOf(parameter) > -1) {\r\n        urlparameter = this.getUrlVars()[parameter];\r\n      }\r\n      return urlparameter;\r\n    },\r\n    signin: function(e) {\r\n      //Access the verification parameters\r\n\r\n      var url_string = window.location.href;\r\n      var url = new URL(url_string);\r\n      var account_token = url.searchParams.get(\"account_linking_token\");\r\n      var access_token = process.env.VUE_APP_FB_PAGE_ACCESS_TOKEN;\r\n\r\n      var r_uri = url.searchParams.get(\"redirect_uri\");\r\n\r\n      console.log(account_token);\r\n      console.log(r_uri);\r\n      if (account_token != null && r_uri) {\r\n        var provider = new firebase.auth.FacebookAuthProvider();\r\n        firebaseApp\r\n          .auth()\r\n          .signInWithPopup(provider)\r\n          .then(result => {\r\n            var token = result.credential.accessToken;\r\n            // The signed-in user info.\r\n            var user = result.user;\r\n            alert(`Alert 1 Login successful for ${user.providerData[0].displayName}`);\r\n            firebaseApp\r\n              .auth()\r\n              .currentUser.updateProfile({\r\n                displayName: user.providerData[0].displayName\r\n              })\r\n              .then(() => {\r\n                this.updateDoc(user, account_token, access_token, r_uri);\r\n                //console.log(firebaseApp.auth().currentUser);\r\n              })\r\n              .catch(err => {\r\n                console.log(err);\r\n                this.errorMessage = err.message;\r\n              });\r\n          })\r\n\r\n          .catch(function(error) {\r\n            console.log(error);\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // The email of the user's account used.\r\n            var email = error.email;\r\n            // The firebase.auth.AuthCredential type that was used.\r\n            var credential = error.credential;\r\n            // ...\r\n          });\r\n      } else {\r\n        var provider = new firebase.auth.FacebookAuthProvider();\r\n        firebaseApp\r\n          .auth()\r\n          .signInWithPopup(provider)\r\n          .then(result => {\r\n            var token = result.credential.accessToken;\r\n            // The signed-in user info.\r\n            var user = result.user;\r\n            alert(`Alert 2 Login successful for ${user.providerData[0].displayName}`);\r\n            firebaseApp\r\n              .auth()\r\n              .currentUser.updateProfile({\r\n                displayName: user.providerData[0].displayName\r\n              })\r\n              .then(() => {\r\n                this.currentUser = firebaseApp.auth().currentUser;\r\n                console.log(\"Then \"+this.currentUser.uid+\" \"+firebaseApp.auth().currentUser);\r\n\r\n                db.collection(\"users\")\r\n                  .doc(this.currentUser.uid)\r\n                  .set({\r\n                    name: user.providerData[0].displayName,\r\n                    facebookID: user.providerData[0].uid\r\n                  },{merge: true})\r\n                  .then(() => {\r\n                    this.loadData();\r\n                    router.go({ name: \"groceryDashboard\" });\r\n                  })\r\n                  .catch(err => {\r\n                    this.errorMessage = err.message;\r\n                  });\r\n              })\r\n              .catch(err => {\r\n                console.log(err);\r\n                this.errorMessage = err.message;\r\n              });\r\n          })\r\n\r\n          .catch(function(error) {\r\n            console.log(error);\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // The email of the user's account used.\r\n            var email = error.email;\r\n            // The firebase.auth.AuthCredential type that was used.\r\n            var credential = error.credential;\r\n            // ...\r\n          });\r\n      }\r\n    },\r\n    loadData: function() {\r\n      console.log(\"Checking storage\" + sessionStorage.getItem(\"storeId\"));\r\n      console.log(\"uid: \" + this.currentUser.uid);\r\n\r\n      // you can load data from here and assign response in to variable\r\n      db.collection(\"users\")\r\n        .doc(this.currentUser.uid)\r\n        .get()\r\n        .then(function(doc) {\r\n          if (doc.exists && doc.get(\"storeId\")) {\r\n            console.log(doc.get(\"storeId\"));\r\n            sessionStorage.setItem(\"storeId\", doc.get(\"storeId\"));\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          console.log(\"Error getting document:\", error);\r\n        });\r\n    },\r\n    addToShoppingLists(resp, r_uri) {\r\n      this.currentUser = firebaseApp.auth().currentUser;\r\n      console.log(this.currentUser.uid);\r\n      console.log(\"addtoshopping lists\");\r\n      const newDocumentBody = {\r\n        messengerID: resp.data.recipient\r\n      };\r\n      db.collection(\"shopping_lists\")\r\n        .where(\"uid\", \"==\", this.currentUser.uid)\r\n        .get()\r\n        .then(response => {\r\n          let batch = db.batch();\r\n          response.docs.forEach(doc => {\r\n            const docRef = firebase\r\n              .firestore()\r\n              .collection(\"shopping_lists\")\r\n              .doc(doc.id);\r\n            batch.update(docRef, newDocumentBody);\r\n          });\r\n          batch.commit().then(() => {\r\n            console.log(`updated all documents inside`);\r\n            window.location.href =\r\n              r_uri + \"&authorization_code=\" + this.currentUser.uid;\r\n          });\r\n        })\r\n        .catch(err => {\r\n          console.log(err.message);\r\n\r\n          console.log(\"No Shopping lists yet\");\r\n          window.location.href =\r\n            r_uri + \"&authorization_code=\" + this.currentUser.uid;\r\n        });\r\n    },\r\n\r\n    updateDoc: function(user, account_token, access_token, r_uri) {\r\n      this.currentUser = firebaseApp.auth().currentUser;\r\n      console.log(\"PAGE ACCESS TOKEN\" + access_token);\r\n      axios\r\n        .get(\r\n          \"https://graph.facebook.com/v2.6/me?access_token=\" +\r\n            access_token +\r\n            \"&fields=recipient&account_linking_token=\" +\r\n            account_token\r\n        )\r\n        .then(resp => {\r\n          console.log(resp.data.recipient);\r\n          db.collection(\"users\")\r\n            .doc(this.currentUser.uid)\r\n            .update({\r\n              name: user.providerData[0].displayName,\r\n              facebookID: user.providerData[0].uid,\r\n              messengerID: resp.data.recipient\r\n            })\r\n            .then(() => {\r\n              console.log(\"then\");\r\n              this.addToShoppingLists(resp, r_uri);\r\n            })\r\n            .catch(err => {\r\n              console.log(err.message);\r\n              this.errorMessage = err.message;\r\n            });\r\n        });\r\n    }\r\n    // signin: function(e) {\r\n    //   fb.auth()\r\n    //     .signInWithEmailAndPassword(this.email, this.password)\r\n    //     .then(\r\n    //       user => {\r\n    //         alert(`Login successful for ${user.user.email}`);\r\n    //         router.go({ name: \"groceryDashboard\" });\r\n    //         console.log(user);\r\n    //       },\r\n    //       err => {\r\n    //         alert(\"error \" + err.message);\r\n    //       }\r\n    //     );\r\n    //   e.preventDefault();\r\n    // }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.btn {\r\n  display: inline-block;\r\n  background: var(--primary-color);\r\n  color: #fff;\r\n  padding: 0.8rem 1.5rem;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  border-radius: 30px;\r\n  margin-top: 0.2rem;\r\n}\r\n</style>"]}]}