{"remainingRequest":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\src\\components\\SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\src\\components\\SignIn.vue","mtime":1585957765859},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Work Account\\Documents\\4th Year\\Software Development\\smartgrocery\\smartgrocery\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2VBcHAgZnJvbSAiLi4vZmlyZWJhc2VJbml0IjsNCmltcG9ydCBmaXJlYmFzZSwgeyBmdW5jdGlvbnMgfSBmcm9tICJmaXJlYmFzZSI7DQppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlciI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KY29uc3QgZGIgPSBmaXJlYmFzZUFwcC5maXJlc3RvcmUoKTsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInNpZ25pbiIsDQogIGRhdGE6IGZ1bmN0aW9uKCkgew0KICAgIHJldHVybiB7DQogICAgICBlbWFpbDogIiIsDQogICAgICBwYXNzd29yZDogIiIsDQogICAgICBjdXJyZW50VXNlcjogZmlyZWJhc2VBcHAuYXV0aCgpLmN1cnJlbnRVc2VyDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFVybFZhcnM6IGZ1bmN0aW9uKCkgew0KICAgICAgdmFyIHZhcnMgPSB7fTsNCiAgICAgIHZhciBwYXJ0cyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoDQogICAgICAgIC9bPyZdKyhbXj0mXSspPShbXiZdKikvZ2ksDQogICAgICAgIGZ1bmN0aW9uKG0sIGtleSwgdmFsdWUpIHsNCiAgICAgICAgICB2YXJzW2tleV0gPSB2YWx1ZTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICAgIHJldHVybiB2YXJzOw0KICAgIH0sDQogICAgZ2V0VXJsUGFyYW06IGZ1bmN0aW9uKHBhcmFtZXRlciwgZGVmYXVsdHZhbHVlKSB7DQogICAgICB2YXIgdXJscGFyYW1ldGVyID0gZGVmYXVsdHZhbHVlOw0KICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocGFyYW1ldGVyKSA+IC0xKSB7DQogICAgICAgIHVybHBhcmFtZXRlciA9IHRoaXMuZ2V0VXJsVmFycygpW3BhcmFtZXRlcl07DQogICAgICB9DQogICAgICByZXR1cm4gdXJscGFyYW1ldGVyOw0KICAgIH0sDQogICAgc2lnbmluOiBmdW5jdGlvbihlKSB7DQogICAgICAvL0FjY2VzcyB0aGUgdmVyaWZpY2F0aW9uIHBhcmFtZXRlcnMNCg0KICAgICAgdmFyIHVybF9zdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsNCiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKHVybF9zdHJpbmcpOw0KICAgICAgdmFyIGFjY291bnRfdG9rZW4gPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgiYWNjb3VudF9saW5raW5nX3Rva2VuIik7DQogICAgICB2YXIgYWNjZXNzX3Rva2VuID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9GQl9QQUdFX0FDQ0VTU19UT0tFTjsNCg0KICAgICAgdmFyIHJfdXJpID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoInJlZGlyZWN0X3VyaSIpOw0KDQogICAgICBjb25zb2xlLmxvZyhhY2NvdW50X3Rva2VuKTsNCiAgICAgIGNvbnNvbGUubG9nKHJfdXJpKTsNCiAgICAgIGlmIChhY2NvdW50X3Rva2VuICE9IG51bGwgJiYgcl91cmkpIHsNCiAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTsNCiAgICAgICAgZmlyZWJhc2VBcHANCiAgICAgICAgICAuYXV0aCgpDQogICAgICAgICAgLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikNCiAgICAgICAgICAudGhlbihyZXN1bHQgPT4gew0KICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0LmNyZWRlbnRpYWwuYWNjZXNzVG9rZW47DQogICAgICAgICAgICAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby4NCiAgICAgICAgICAgIHZhciB1c2VyID0gcmVzdWx0LnVzZXI7DQogICAgICAgICAgICBhbGVydChgQWxlcnQgMSBMb2dpbiBzdWNjZXNzZnVsIGZvciAke3VzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lfWApOw0KICAgICAgICAgICAgZmlyZWJhc2VBcHANCiAgICAgICAgICAgICAgLmF1dGgoKQ0KICAgICAgICAgICAgICAuY3VycmVudFVzZXIudXBkYXRlUHJvZmlsZSh7DQogICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHVzZXIucHJvdmlkZXJEYXRhWzBdLmRpc3BsYXlOYW1lDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURvYyh1c2VyLCBhY2NvdW50X3Rva2VuLCBhY2Nlc3NfdG9rZW4sIHJfdXJpKTsNCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpcmViYXNlQXBwLmF1dGgoKS5jdXJyZW50VXNlcik7DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnIubWVzc2FnZTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSkNCg0KICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICAgICAgLy8gSGFuZGxlIEVycm9ycyBoZXJlLg0KICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7DQogICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTsNCiAgICAgICAgICAgIC8vIFRoZSBlbWFpbCBvZiB0aGUgdXNlcidzIGFjY291bnQgdXNlZC4NCiAgICAgICAgICAgIHZhciBlbWFpbCA9IGVycm9yLmVtYWlsOw0KICAgICAgICAgICAgLy8gVGhlIGZpcmViYXNlLmF1dGguQXV0aENyZWRlbnRpYWwgdHlwZSB0aGF0IHdhcyB1c2VkLg0KICAgICAgICAgICAgdmFyIGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsOw0KICAgICAgICAgICAgLy8gLi4uDQogICAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB2YXIgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5GYWNlYm9va0F1dGhQcm92aWRlcigpOw0KICAgICAgICBmaXJlYmFzZUFwcA0KICAgICAgICAgIC5hdXRoKCkNCiAgICAgICAgICAuc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKQ0KICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7DQogICAgICAgICAgICB2YXIgdG9rZW4gPSByZXN1bHQuY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjsNCiAgICAgICAgICAgIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLg0KICAgICAgICAgICAgdmFyIHVzZXIgPSByZXN1bHQudXNlcjsNCiAgICAgICAgICAgIGFsZXJ0KGBBbGVydCAyIExvZ2luIHN1Y2Nlc3NmdWwgZm9yICR7dXNlci5wcm92aWRlckRhdGFbMF0uZGlzcGxheU5hbWV9YCk7DQogICAgICAgICAgICBmaXJlYmFzZUFwcA0KICAgICAgICAgICAgICAuYXV0aCgpDQogICAgICAgICAgICAgIC5jdXJyZW50VXNlci51cGRhdGVQcm9maWxlKHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogdXNlci5wcm92aWRlckRhdGFbMF0uZGlzcGxheU5hbWUNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBmaXJlYmFzZUFwcC5hdXRoKCkuY3VycmVudFVzZXI7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRoZW4gIit0aGlzLmN1cnJlbnRVc2VyLnVpZCsiICIrZmlyZWJhc2VBcHAuYXV0aCgpLmN1cnJlbnRVc2VyKTsNCg0KICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInVzZXJzIikNCiAgICAgICAgICAgICAgICAgIC5kb2ModGhpcy5jdXJyZW50VXNlci51aWQpDQogICAgICAgICAgICAgICAgICAuc2V0KHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdXNlci5wcm92aWRlckRhdGFbMF0uZGlzcGxheU5hbWUsDQogICAgICAgICAgICAgICAgICAgIGZhY2Vib29rSUQ6IHVzZXIucHJvdmlkZXJEYXRhWzBdLnVpZA0KICAgICAgICAgICAgICAgICAgfSx7bWVyZ2U6IHRydWV9KQ0KICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKCk7DQogICAgICAgICAgICAgICAgICAgIHJvdXRlci5nbyh7IG5hbWU6ICJncm9jZXJ5RGFzaGJvYXJkIiB9KTsNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnIubWVzc2FnZTsNCiAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyLm1lc3NhZ2U7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pDQoNCiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgICAgIC8vIEhhbmRsZSBFcnJvcnMgaGVyZS4NCiAgICAgICAgICAgIHZhciBlcnJvckNvZGUgPSBlcnJvci5jb2RlOw0KICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7DQogICAgICAgICAgICAvLyBUaGUgZW1haWwgb2YgdGhlIHVzZXIncyBhY2NvdW50IHVzZWQuDQogICAgICAgICAgICB2YXIgZW1haWwgPSBlcnJvci5lbWFpbDsNCiAgICAgICAgICAgIC8vIFRoZSBmaXJlYmFzZS5hdXRoLkF1dGhDcmVkZW50aWFsIHR5cGUgdGhhdCB3YXMgdXNlZC4NCiAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0gZXJyb3IuY3JlZGVudGlhbDsNCiAgICAgICAgICAgIC8vIC4uLg0KICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgbG9hZERhdGE6IGZ1bmN0aW9uKCkgew0KICAgICAgY29uc29sZS5sb2coIkNoZWNraW5nIHN0b3JhZ2UiICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgic3RvcmVJZCIpKTsNCiAgICAgIGNvbnNvbGUubG9nKCJ1aWQ6ICIgKyB0aGlzLmN1cnJlbnRVc2VyLnVpZCk7DQoNCiAgICAgIC8vIHlvdSBjYW4gbG9hZCBkYXRhIGZyb20gaGVyZSBhbmQgYXNzaWduIHJlc3BvbnNlIGluIHRvIHZhcmlhYmxlDQogICAgICBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpDQogICAgICAgIC5kb2ModGhpcy5jdXJyZW50VXNlci51aWQpDQogICAgICAgIC5nZXQoKQ0KICAgICAgICAudGhlbihmdW5jdGlvbihkb2MpIHsNCiAgICAgICAgICBpZiAoZG9jLmV4aXN0cyAmJiBkb2MuZ2V0KCJzdG9yZUlkIikpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRvYy5nZXQoInN0b3JlSWQiKSk7DQogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJzdG9yZUlkIiwgZG9jLmdldCgic3RvcmVJZCIpKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBnZXR0aW5nIGRvY3VtZW50OiIsIGVycm9yKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBhZGRUb1Nob3BwaW5nTGlzdHMocmVzcCwgcl91cmkpIHsNCiAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBmaXJlYmFzZUFwcC5hdXRoKCkuY3VycmVudFVzZXI7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRVc2VyLnVpZCk7DQogICAgICBjb25zb2xlLmxvZygiYWRkdG9zaG9wcGluZyBsaXN0cyIpOw0KICAgICAgY29uc3QgbmV3RG9jdW1lbnRCb2R5ID0gew0KICAgICAgICBtZXNzZW5nZXJJRDogcmVzcC5kYXRhLnJlY2lwaWVudA0KICAgICAgfTsNCiAgICAgIGRiLmNvbGxlY3Rpb24oInNob3BwaW5nX2xpc3RzIikNCiAgICAgICAgLndoZXJlKCJ1aWQiLCAiPT0iLCB0aGlzLmN1cnJlbnRVc2VyLnVpZCkNCiAgICAgICAgLmdldCgpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBsZXQgYmF0Y2ggPSBkYi5iYXRjaCgpOw0KICAgICAgICAgIHJlc3BvbnNlLmRvY3MuZm9yRWFjaChkb2MgPT4gew0KICAgICAgICAgICAgY29uc3QgZG9jUmVmID0gZmlyZWJhc2UNCiAgICAgICAgICAgICAgLmZpcmVzdG9yZSgpDQogICAgICAgICAgICAgIC5jb2xsZWN0aW9uKCJzaG9wcGluZ19saXN0cyIpDQogICAgICAgICAgICAgIC5kb2MoZG9jLmlkKTsNCiAgICAgICAgICAgIGJhdGNoLnVwZGF0ZShkb2NSZWYsIG5ld0RvY3VtZW50Qm9keSk7DQogICAgICAgICAgfSk7DQogICAgICAgICAgYmF0Y2guY29tbWl0KCkudGhlbigoKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhgdXBkYXRlZCBhbGwgZG9jdW1lbnRzIGluc2lkZWApOw0KICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPQ0KICAgICAgICAgICAgICByX3VyaSArICImYXV0aG9yaXphdGlvbl9jb2RlPSIgKyB0aGlzLmN1cnJlbnRVc2VyLnVpZDsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOw0KDQogICAgICAgICAgY29uc29sZS5sb2coIk5vIFNob3BwaW5nIGxpc3RzIHlldCIpOw0KICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0NCiAgICAgICAgICAgIHJfdXJpICsgIiZhdXRob3JpemF0aW9uX2NvZGU9IiArIHRoaXMuY3VycmVudFVzZXIudWlkOw0KICAgICAgICB9KTsNCiAgICB9LA0KDQogICAgdXBkYXRlRG9jOiBmdW5jdGlvbih1c2VyLCBhY2NvdW50X3Rva2VuLCBhY2Nlc3NfdG9rZW4sIHJfdXJpKSB7DQogICAgICB0aGlzLmN1cnJlbnRVc2VyID0gZmlyZWJhc2VBcHAuYXV0aCgpLmN1cnJlbnRVc2VyOw0KICAgICAgY29uc29sZS5sb2coIlBBR0UgQUNDRVNTIFRPS0VOIiArIGFjY2Vzc190b2tlbik7DQogICAgICBheGlvcw0KICAgICAgICAuZ2V0KA0KICAgICAgICAgICJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92Mi42L21lP2FjY2Vzc190b2tlbj0iICsNCiAgICAgICAgICAgIGFjY2Vzc190b2tlbiArDQogICAgICAgICAgICAiJmZpZWxkcz1yZWNpcGllbnQmYWNjb3VudF9saW5raW5nX3Rva2VuPSIgKw0KICAgICAgICAgICAgYWNjb3VudF90b2tlbg0KICAgICAgICApDQogICAgICAgIC50aGVuKHJlc3AgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YS5yZWNpcGllbnQpOw0KICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInVzZXJzIikNCiAgICAgICAgICAgIC5kb2ModGhpcy5jdXJyZW50VXNlci51aWQpDQogICAgICAgICAgICAudXBkYXRlKHsNCiAgICAgICAgICAgICAgbmFtZTogdXNlci5wcm92aWRlckRhdGFbMF0uZGlzcGxheU5hbWUsDQogICAgICAgICAgICAgIGZhY2Vib29rSUQ6IHVzZXIucHJvdmlkZXJEYXRhWzBdLnVpZCwNCiAgICAgICAgICAgICAgbWVzc2VuZ2VySUQ6IHJlc3AuZGF0YS5yZWNpcGllbnQNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ0aGVuIik7DQogICAgICAgICAgICAgIHRoaXMuYWRkVG9TaG9wcGluZ0xpc3RzKHJlc3AsIHJfdXJpKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVyci5tZXNzYWdlOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH0NCiAgICAvLyBzaWduaW46IGZ1bmN0aW9uKGUpIHsNCiAgICAvLyAgIGZiLmF1dGgoKQ0KICAgIC8vICAgICAuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQodGhpcy5lbWFpbCwgdGhpcy5wYXNzd29yZCkNCiAgICAvLyAgICAgLnRoZW4oDQogICAgLy8gICAgICAgdXNlciA9PiB7DQogICAgLy8gICAgICAgICBhbGVydChgTG9naW4gc3VjY2Vzc2Z1bCBmb3IgJHt1c2VyLnVzZXIuZW1haWx9YCk7DQogICAgLy8gICAgICAgICByb3V0ZXIuZ28oeyBuYW1lOiAiZ3JvY2VyeURhc2hib2FyZCIgfSk7DQogICAgLy8gICAgICAgICBjb25zb2xlLmxvZyh1c2VyKTsNCiAgICAvLyAgICAgICB9LA0KICAgIC8vICAgICAgIGVyciA9PiB7DQogICAgLy8gICAgICAgICBhbGVydCgiZXJyb3IgIiArIGVyci5tZXNzYWdlKTsNCiAgICAvLyAgICAgICB9DQogICAgLy8gICAgICk7DQogICAgLy8gICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgLy8gfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignIn.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"signIn\">\r\n    <button type=\"button\" @click=\"signin\" class=\"btn\" style=\"background-color:#3b5998;\">\r\n      <i class=\"fab fa-facebook-f pr-1\"></i>Sign in with Facebook\r\n    </button>\r\n\r\n    <!-- <form class=\"form-signin\">\r\n              <div class=\"form-label-group\">\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"inputEmail\"\r\n                  class=\"form-control\"\r\n                  v-model=\"email\"\r\n                  placeholder=\"Email address\"\r\n                  required\r\n                  autofocus\r\n                />\r\n              </div>\r\n              <br />\r\n              <div class=\"form-label-group\">\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  class=\"form-control\"\r\n                  v-model=\"password\"\r\n                  placeholder=\"Password\"\r\n                  required\r\n                />\r\n              </div>\r\n              <br />\r\n              <button\r\n                class=\"btn btn-lg btn-primary btn-outline-primary\"\r\n                @click=\"signin\"\r\n                type=\"submit\"\r\n              >Log In</button>\r\n    </form>-->\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n</style>\r\n<script>\r\nimport firebaseApp from \"../firebaseInit\";\r\nimport firebase, { functions } from \"firebase\";\r\nimport router from \"../router\";\r\nimport axios from \"axios\";\r\nconst db = firebaseApp.firestore();\r\nexport default {\r\n  name: \"signin\",\r\n  data: function() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n      currentUser: firebaseApp.auth().currentUser\r\n    };\r\n  },\r\n  methods: {\r\n    getUrlVars: function() {\r\n      var vars = {};\r\n      var parts = window.location.href.replace(\r\n        /[?&]+([^=&]+)=([^&]*)/gi,\r\n        function(m, key, value) {\r\n          vars[key] = value;\r\n        }\r\n      );\r\n      return vars;\r\n    },\r\n    getUrlParam: function(parameter, defaultvalue) {\r\n      var urlparameter = defaultvalue;\r\n      if (window.location.href.indexOf(parameter) > -1) {\r\n        urlparameter = this.getUrlVars()[parameter];\r\n      }\r\n      return urlparameter;\r\n    },\r\n    signin: function(e) {\r\n      //Access the verification parameters\r\n\r\n      var url_string = window.location.href;\r\n      var url = new URL(url_string);\r\n      var account_token = url.searchParams.get(\"account_linking_token\");\r\n      var access_token = process.env.VUE_APP_FB_PAGE_ACCESS_TOKEN;\r\n\r\n      var r_uri = url.searchParams.get(\"redirect_uri\");\r\n\r\n      console.log(account_token);\r\n      console.log(r_uri);\r\n      if (account_token != null && r_uri) {\r\n        var provider = new firebase.auth.FacebookAuthProvider();\r\n        firebaseApp\r\n          .auth()\r\n          .signInWithPopup(provider)\r\n          .then(result => {\r\n            var token = result.credential.accessToken;\r\n            // The signed-in user info.\r\n            var user = result.user;\r\n            alert(`Alert 1 Login successful for ${user.providerData[0].displayName}`);\r\n            firebaseApp\r\n              .auth()\r\n              .currentUser.updateProfile({\r\n                displayName: user.providerData[0].displayName\r\n              })\r\n              .then(() => {\r\n                this.updateDoc(user, account_token, access_token, r_uri);\r\n                //console.log(firebaseApp.auth().currentUser);\r\n              })\r\n              .catch(err => {\r\n                console.log(err);\r\n                this.errorMessage = err.message;\r\n              });\r\n          })\r\n\r\n          .catch(function(error) {\r\n            console.log(error);\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // The email of the user's account used.\r\n            var email = error.email;\r\n            // The firebase.auth.AuthCredential type that was used.\r\n            var credential = error.credential;\r\n            // ...\r\n          });\r\n      } else {\r\n        var provider = new firebase.auth.FacebookAuthProvider();\r\n        firebaseApp\r\n          .auth()\r\n          .signInWithPopup(provider)\r\n          .then(result => {\r\n            var token = result.credential.accessToken;\r\n            // The signed-in user info.\r\n            var user = result.user;\r\n            alert(`Alert 2 Login successful for ${user.providerData[0].displayName}`);\r\n            firebaseApp\r\n              .auth()\r\n              .currentUser.updateProfile({\r\n                displayName: user.providerData[0].displayName\r\n              })\r\n              .then(() => {\r\n                this.currentUser = firebaseApp.auth().currentUser;\r\n                console.log(\"Then \"+this.currentUser.uid+\" \"+firebaseApp.auth().currentUser);\r\n\r\n                db.collection(\"users\")\r\n                  .doc(this.currentUser.uid)\r\n                  .set({\r\n                    name: user.providerData[0].displayName,\r\n                    facebookID: user.providerData[0].uid\r\n                  },{merge: true})\r\n                  .then(() => {\r\n                    this.loadData();\r\n                    router.go({ name: \"groceryDashboard\" });\r\n                  })\r\n                  .catch(err => {\r\n                    this.errorMessage = err.message;\r\n                  });\r\n              })\r\n              .catch(err => {\r\n                console.log(err);\r\n                this.errorMessage = err.message;\r\n              });\r\n          })\r\n\r\n          .catch(function(error) {\r\n            console.log(error);\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // The email of the user's account used.\r\n            var email = error.email;\r\n            // The firebase.auth.AuthCredential type that was used.\r\n            var credential = error.credential;\r\n            // ...\r\n          });\r\n      }\r\n    },\r\n    loadData: function() {\r\n      console.log(\"Checking storage\" + sessionStorage.getItem(\"storeId\"));\r\n      console.log(\"uid: \" + this.currentUser.uid);\r\n\r\n      // you can load data from here and assign response in to variable\r\n      db.collection(\"users\")\r\n        .doc(this.currentUser.uid)\r\n        .get()\r\n        .then(function(doc) {\r\n          if (doc.exists && doc.get(\"storeId\")) {\r\n            console.log(doc.get(\"storeId\"));\r\n            sessionStorage.setItem(\"storeId\", doc.get(\"storeId\"));\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          console.log(\"Error getting document:\", error);\r\n        });\r\n    },\r\n    addToShoppingLists(resp, r_uri) {\r\n      this.currentUser = firebaseApp.auth().currentUser;\r\n      console.log(this.currentUser.uid);\r\n      console.log(\"addtoshopping lists\");\r\n      const newDocumentBody = {\r\n        messengerID: resp.data.recipient\r\n      };\r\n      db.collection(\"shopping_lists\")\r\n        .where(\"uid\", \"==\", this.currentUser.uid)\r\n        .get()\r\n        .then(response => {\r\n          let batch = db.batch();\r\n          response.docs.forEach(doc => {\r\n            const docRef = firebase\r\n              .firestore()\r\n              .collection(\"shopping_lists\")\r\n              .doc(doc.id);\r\n            batch.update(docRef, newDocumentBody);\r\n          });\r\n          batch.commit().then(() => {\r\n            console.log(`updated all documents inside`);\r\n            window.location.href =\r\n              r_uri + \"&authorization_code=\" + this.currentUser.uid;\r\n          });\r\n        })\r\n        .catch(err => {\r\n          console.log(err.message);\r\n\r\n          console.log(\"No Shopping lists yet\");\r\n          window.location.href =\r\n            r_uri + \"&authorization_code=\" + this.currentUser.uid;\r\n        });\r\n    },\r\n\r\n    updateDoc: function(user, account_token, access_token, r_uri) {\r\n      this.currentUser = firebaseApp.auth().currentUser;\r\n      console.log(\"PAGE ACCESS TOKEN\" + access_token);\r\n      axios\r\n        .get(\r\n          \"https://graph.facebook.com/v2.6/me?access_token=\" +\r\n            access_token +\r\n            \"&fields=recipient&account_linking_token=\" +\r\n            account_token\r\n        )\r\n        .then(resp => {\r\n          console.log(resp.data.recipient);\r\n          db.collection(\"users\")\r\n            .doc(this.currentUser.uid)\r\n            .update({\r\n              name: user.providerData[0].displayName,\r\n              facebookID: user.providerData[0].uid,\r\n              messengerID: resp.data.recipient\r\n            })\r\n            .then(() => {\r\n              console.log(\"then\");\r\n              this.addToShoppingLists(resp, r_uri);\r\n            })\r\n            .catch(err => {\r\n              console.log(err.message);\r\n              this.errorMessage = err.message;\r\n            });\r\n        });\r\n    }\r\n    // signin: function(e) {\r\n    //   fb.auth()\r\n    //     .signInWithEmailAndPassword(this.email, this.password)\r\n    //     .then(\r\n    //       user => {\r\n    //         alert(`Login successful for ${user.user.email}`);\r\n    //         router.go({ name: \"groceryDashboard\" });\r\n    //         console.log(user);\r\n    //       },\r\n    //       err => {\r\n    //         alert(\"error \" + err.message);\r\n    //       }\r\n    //     );\r\n    //   e.preventDefault();\r\n    // }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.btn {\r\n  display: inline-block;\r\n  background: var(--primary-color);\r\n  color: #fff;\r\n  padding: 0.8rem 1.5rem;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  border-radius: 30px;\r\n  margin-top: 0.2rem;\r\n}\r\n</style>"]}]}